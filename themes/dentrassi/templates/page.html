{%- import 'macros/post.html' as post -%}

{% extends "base.html" %}

{% block content %}

<article class="de-article" itemscope itemtype="http://schema.org/BlogPosting">

  <div>

    <section class="de-article__header">
      <h1 itemprop="name headline">{{ page.title }}</h1>
      <div class="">
        {{ post::info(page=page) }}
      </div>
    </section>

    <hr/>

    <section class="de-article__body" itemprop="articleBody">
      {{ page.content | safe }}
    </section>

  </div>

</article>

{% endblock content %}

{% block rightside %}
<div class="de-sidebox">
  <h3>Table of Content</h3>

  {% if page.toc %}
  <ul id="toc">
    {% for h1 in page.toc %}
    <li>
      <a href="#{{ h1.id | safe }}">{{ h1.title }}</a>
      {% if h1.children %}
      <ul>
        {% for h2 in h1.children %}
        <li>
          <a href="#{{ h2.id | safe }}">{{ h2.title }}</a>
        </li>
        {% endfor %}
      </ul>
      {% endif %}
    </li>
    {% endfor %}
  </ul>
  {% endif %}

</div>
{% endblock rightside %}
