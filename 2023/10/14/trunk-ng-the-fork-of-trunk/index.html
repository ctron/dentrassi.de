<!doctype html><html lang=en-US><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link as=font crossorigin href=https://dentrassi.de/files/jost-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/jost-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/jost-latin-700-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/noto-sans-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/noto-sans-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/noto-sans-latin-700-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/source-code-pro-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/source-code-pro-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/source-code-pro-latin-700-normal.woff2 rel=preload type=font/woff2><link href="https://dentrassi.de/main.css?h=2dfc44bfb1473ee627f0" rel=stylesheet><meta content="This blog post lays out the reasons why I decided to fork trunk, what the current state is, and what could be the
future.
" name=description><meta content=article property=og:type><meta content="ctron's blog" property=og:site_name><meta content="trunk-ng, the fork of trunk" property=og:title><meta content=https://dentrassi.de/2023/10/14/trunk-ng-the-fork-of-trunk property=og:url><meta content="This blog post lays out the reasons why I decided to fork trunk, what the current state is, and what could be the
future.
" property=og:description><meta content="Jens Reimann" property=og:author_name><meta content=https://dentrassi.de property=og:author_url><meta content=summary name=twitter:card><meta content=@ctron name=twitter:site><meta content="trunk-ng, the fork of trunk" name=twitter:title><meta content="This blog post lays out the reasons why I decided to fork trunk, what the current state is, and what could be the
future.
" name=twitter:description><meta content=Rust property=article:tag><meta content=WebAssembly property=article:tag><meta content=Frontend property=article:tag><title>trunk-ng, the fork of trunk – ctron's blog</title><link href=https://dentrassi.de/2023/10/14/trunk-ng-the-fork-of-trunk/ rel=canonical><link href=https://dentrassi.de/rss.xml rel=alternate title=RSS type=application/rss+xml><script>var _paq=window._paq=window._paq||[];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function(){var a="https://logs.dentrassi.de/";_paq.push(['setTrackerUrl',a+ 'matomo.php']);_paq.push(['setSiteId','1']);var b=document,c=b.createElement('script'),d=b.getElementsByTagName('script')[0];c.async=true;c.src=a+ 'matomo.js';d.parentNode.insertBefore(c,d)})()</script><body data-bs-spy=scroll data-bs-target=#toc tabindex=0><nav class="navbar fixed-top navbar-expand-lg bg-body-tertiary"><div class=container><a class=navbar-brand href=https://dentrassi.de>ctron's blog</a><form class="de-c-search-form d-none d-lg-flex ms-auto me-3"><input placeholder="Search docs" aria-label=Search autocomplete=off class=form-control id=searchInput type=search><div class="shadow bg-white rounded" id=suggestions></div></form><div class="d-none d-md-flex ms-auto ms-lg-0 me-4 me-lg-0"><div class=row><div class=col><a title="Link to my GitHub profile" class=link-secondary href=https://github.com/ctron target=_blank> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> </a></div><div class=col><a title="Link to my Mastodon profile" class=link-secondary href=https://mastodon.dentrassi.de/@ctron rel=me target=_blank> <svg viewbox="0 0 24 24" fill=currentColor height=24 stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z"/></svg> </a></div><div class=col><a title="Link to my matrix address" class=link-secondary href=https://matrix.to/#%2F%40ctron%3Adentrassi.de target=_blank> <svg class="feather feather-message-square" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </a></div></div></div><button aria-label="Toggle navigation" aria-controls=rightSidebox aria-expanded=false class=navbar-toggler data-bs-target=#rightSidebox data-bs-toggle=collapse type=button><span class=navbar-toggler-icon></span></button></div></nav><div class="de-layout container"><div class="row d-flex align-items-start"><aside class="col-lg-2 order-last order-lg-0 sticky-lg-top mt-4 mt-lg-5"><div class="de-sidebox de-m-left"><div class=mb-4><h2>More</h2><ul class=list-unstyled><li><a class=link-body-emphasis href=/pages/about/>About</a><li><a class=link-body-emphasis href=/pages/pgp-key/>PGP Key</a><li><a class=link-body-emphasis href=/pages/attic/>Attic</a></ul></div><div class=mb-4><h2>Projects</h2><ul class=list-unstyled><li><a class=link-body-emphasis href=/projects/patternfly-yew/>PatternFly Yew</a><li><a class=link-body-emphasis href=/projects/yew-oauth2/>Yew OAuth2</a><li><a class=link-body-emphasis href=/projects/rpm-builder/>Maven RPM Builder</a><li><a class=link-body-emphasis href=/projects/drogue-iot/>Drogue IoT</a><li><a class=link-body-emphasis href=/projects/openshift-update-graph/>OpenShift Update Graph</a><li><a class=link-body-emphasis href=/projects/ecliipse-iot-packages/>Eclipse IoT Packages</a></ul></div></div></aside><main class="col-12 col-lg-7 px-lg-5 mt-3 mt-lg-4"><article class=de-article itemscope itemtype=http://schema.org/BlogPosting><div><section class=de-article__header><h1 itemprop=headline>trunk-ng, the fork of trunk</h1><div><div class="de-c-post-meta text-muted"><ul class=list-inline><li class=list-inline-item><span>7 minute read</span> <meta content=1201 itemprop=wordCount> <span class=d-none itemprop=author itemscope itemtype=https://schema.org/Person> <a href=https://dentrassi.de itemprop=url> <span itemprop=name>Jens Reimann</span> </a> </span><li class=list-inline-item><span content=2023-10-14T00:00:00+00:00 itemprop=datePublished>14 October 2023</span><li class=list-inline-item><span><a class=link-secondary href=/categories/technical-stuff>Technical Stuff</a></span></ul><ul class=list-inline><li class=list-inline-item><a class=link-secondary href=https://dentrassi.de/tags/rust/>#rust</a> <a class=link-secondary href=https://dentrassi.de/tags/webassembly/>#webassembly</a> <a class=link-secondary href=https://dentrassi.de/tags/frontend/>#frontend</a></ul></div></div></section><hr><section class=de-article__body itemprop=articleBody><p><a rel="noopener nofollow noreferrer" href=https://trunkrs.dev/ target=_blank><code>trunk</code></a> is a great piece of software! When I started with Rust on the frontend, the webpack <code>wasm-pack</code> plugin was the best tooling one could get to compile and package a Rust-based web application. However, that also included a toolchain full of JavaScript tools, the kind of stuff I actually tried to avoid. When Its development came to a halt, <code>trunk</code> showed up, and it was the tool I was hoping for.<p>Unfortunately, it seems that the development of trunk came to a halt too. Now what?</p><span id=continue-reading></span><h2 id=about-trunk>About trunk</h2><p>Trunk is a nice, little tool that orchestrates the build of a Rust/WebAssembly based build for the frontend (aka web browser). Compared to <a rel="noopener nofollow noreferrer" href=https://webpack.js.org/ target=_blank><code>webpack</code></a>, it performs a similar job, but in a much more focused way. Some might find this limiting, but it makes the whole process much less complicated.<p>In times of the <code>wasm-pack</code> plugin, there were a lot of issues around the <code>webpack</code> tooling. <code>webpack</code> moved on, the plugin didn’t follow up, and the whole integration was there, but far from ideal.<p>Trunk changed that situation completely. It was a “rust first” tool, rather than an afterthought. But it was also much more effort than “just” having a plugin for the existing toolchain of webpack. <a rel="noopener nofollow noreferrer" href=https://github.com/thedodd target=_blank>Anthony Dodd</a>, the main author of trunk, did an amazing job.<h2 id=the-build-up>The build up</h2><p>So, what’s the issue? Like any other software, trunk has a few issues, some missing features, and some things which need maintenance over time. And people actually raised issues and came up with PRs. But the rate at which they got merged and feedback was given, wasn’t great.<p>A more important issue was the one that piled up change events in the build trigger queue. As I am a daily user of trunk, and know some Rust, I thought I’d fix this issue. I contributed to trunk before, it was slow, but worked out. In this case, however, it took 4 months until I got the feedback: not this way.<p>Technically the fix would have worked. But I also understand the feedback. So I did re-implement the solution in the newly suggested way. After another month of no reply, I raised an issue, <a rel="noopener nofollow noreferrer" href=https://github.com/thedodd/trunk/issues/588 target=_blank>asking about the state of the project</a>.<p>I also decided to create a fork, in order to release this single fix for the team I am working on. As I was hoping this would only be temporary, I went for the rather boring name <code>trunk-ng</code>.<p>That got the ball rolling. I got into a bit closer contact with the <code>thedodd</code> and the PR was merged. Yay!<h2 id=a-note-on-open-source-and-the-people-behind-projects>A note on open source and the people behind projects</h2><p>Maybe this is the right moment to write a few words on open source, open source projects, and the expectations towards them. Some projects may be maintained by companies, even big ones. But some projects are not. People might fix some of the problems they have with a tool, and share it wither others, in the hope that it’s as useful to them.<p>That doesn’t mean, however, that they offer 24/7 support, or free consulting around it. With open source, people are encouraged to contribute and contribute fixes and improvements themselves. And if everyone does that, it may grow into something bigger.<p>In any case, a project might still be backed by a few, or even just one, individual. And each person has a personal life. Priorities might change, and more important things might cause a shift in focus. Or maybe someone simply loses interest.<p>And that’s OK! It helps to communicate that fact. But in any case: <strong>IT IS OK!</strong><h2 id=more-silence>More silence</h2><p>After this PR was finally merged and understood the situation of the project a bit better, I wanted to help out more and groomed through the existing, open PRs, in order to get people on board rebasing them and fixing them up to get them merged too. There were a bunch of simple and small ones, quick wins.<p>Turns out that the change right after my PR (the cooldown), introduced a behavior that led to some weird behavior of <code>trunk</code>. After a build was completed, all change events so far were discarded. This might lead to some stale state, where the content of the served frontend no longer reflects the code in the filesystem.<p>I started to work on a draft PR, to get some more information from people running into a similar issue on Windows, and at the same time tried to get at least one more PR from some other contributor merged.<p>I learned from <code>thedodd</code> that he will not have much time for <code>trunk</code> at the moment (and that’s ok, see above!), but also the suggestion to reach out to the other maintainers only ended in more silence. People also seemed to get frustrated with the GitHub bot closing issues due to inactivity (never a good idea IMHO).<h2 id=the-fork>The fork</h2><p>In a case where a project gets stalled by the lack of maintainers, there’s a simple solution in the open-source world: forking the project.<p>Some might see this as a negative thing. Even aggressive. But I don’t think that should be the case. It’s just a point in time where people’s interest diverges. Or, like in this case, where one project becomes unresponsive, other people can pick it up, and keep it alive and useful to others.<p>As I already had the GitHub infrastructure in place, it was easy to rebase and continue the work.<h2 id=what-s-the-current-state>What’s the current state?</h2><p>As pushing out new releases is pretty much automated, it’s easy to add some more changes and get them out. As I groomed through open PR before, if cherry-picked some of them into trunk-ng, and released those too. There is a fix in there for race conditions while copying, or some enhancements and doc fixes.<p>If you have some more, please let me know, and raise an issue. I will take a look.<p>There’s also a new Nix package which should be available soon.<h2 id=and-beyond>And beyond?</h2><p>Judging from the list of issues and open PRs, there are some topics that people seem interested in. I can’t fix all of them, but maybe, where my interest overlaps, I can try. Or if you reach out to me, and it’s a small issue, that seems important to you, I might be able to take a look. Just like the Nix package, I don’t use it, but I am also eager to learn something new.<p>There’s one more thing I really wanted to tackle at some point, I simply was afraid a larger PR like this might get stuck. Whenever a build fails, you’re not aware of this in the front end. Wouldn’t it be great, if the front end would give you an error indication? Definitely a thing we could learn from webpack.<p>Ultimately, I truly hope all those changes end up in proper <code>trunk</code> and the fork will no longer be necessary.<p>But until then, let’s get moving!<h2 id=links>Links</h2><ul><li>GitHub <a rel="noopener nofollow noreferrer" href=https://github.com/ctron/trunk target=_blank>ctron/trunk</a> (the <code>trunk-ng</code> branch)<li>Homepage: <a rel="noopener nofollow noreferrer" href=https://ctron.github.io/trunk/ target=_blank>https://ctron.github.io/trunk/</a></ul></section></div></article></main><aside class="col-lg-3 order-first order-lg-0 sticky-top mt-lg-5 de-m-collapsible"><div class="de-sidebox de-m-right collapse d-lg-block" id=rightSidebox><div class="d-flex d-md-none pb-3"><div class=row><div class=col><a title="Link to my GitHub profile" class=link-secondary href=https://github.com/ctron target=_blank> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> </a></div><div class=col><a title="Link to my Mastodon profile" class=link-secondary href=https://mastodon.dentrassi.de/@ctron rel=me target=_blank> <svg viewbox="0 0 24 24" fill=currentColor height=24 stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z"/></svg> </a></div><div class=col><a title="Link to my matrix address" class=link-secondary href=https://matrix.to/#%2F%40ctron%3Adentrassi.de target=_blank> <svg class="feather feather-message-square" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </a></div></div></div><div class="de-c-toc mb-4"><h2>Table of Content</h2><ul class="list-unstyled de-c-toc__first" id=toc><li><a class=link-body-emphasis href=#about-trunk>About trunk</a><li><a class=link-body-emphasis href=#the-build-up>The build up</a><li><a class=link-body-emphasis href=#a-note-on-open-source-and-the-people-behind-projects>A note on open source and the people behind projects</a><li><a class=link-body-emphasis href=#more-silence>More silence</a><li><a class=link-body-emphasis href=#the-fork>The fork</a><li><a class=link-body-emphasis href=#what-s-the-current-state>What’s the current state?</a><li><a class=link-body-emphasis href=#and-beyond>And beyond?</a><li><a class=link-body-emphasis href=#links>Links</a></ul></div><div class="d-lg-block d-none"><div class="de-c-recent-posts mb-2"><h2 class=d-flex><span>Recent Posts</span> <span class=de-c-title__action> <a href=https://dentrassi.de/archive>Archive</a> </span></h2><ul class=list-unstyled><li><a title="ReSyMo: Remote System Monitoring" class=link-body-emphasis href=/2024/04/07/remote-system-monitoring/>ReSyMo: Remote System Monitoring</a><li><a title="An OpenID Connect command line client" class=link-body-emphasis href=/2024/03/16/oidc-command-line-client/>An OpenID Connect command line client</a><li><a title="Release of Trunk 0.19.0" class=link-body-emphasis href=/2024/03/11/trunk-0-19-0/>Release of Trunk 0.19.0</a><li><a title="Good news everyone: Trunk is back" class=link-body-emphasis href=/2024/01/16/good-news-everyone/>Good news everyone: Trunk is back</a><li><a title="Yew components for OpenID connect and OAuth2" class=link-body-emphasis href=/2023/10/22/yew-oauth2/>Yew components for OpenID connect and OAuth2</a></ul></div></div><div class="de-c-toc mb-4"><h2 class=d-flex><span>Categories</span> <span class=de-c-title__action> <a href=https://dentrassi.de/categories>All</a> </span></h2><ul class=list-unstyled><li><a class=link-body-emphasis href=https://dentrassi.de/categories/technical-stuff/>Technical Stuff</a><li><a class=link-body-emphasis href=https://dentrassi.de/categories/open-source/>Open Source</a></ul></div><div class="de-c-toc mb-4"><h2 class=d-flex><span>Tags</span> <span class=de-c-title__action> <a href=https://dentrassi.de/tags>All</a> </span></h2><a class=link-body-emphasis href=https://dentrassi.de/tags/rust/>#rust</a><a class=link-body-emphasis href=https://dentrassi.de/tags/webassembly/>#webassembly</a><a class=link-body-emphasis href=https://dentrassi.de/tags/frontend/>#frontend</a></div></div></aside></div></div><footer class="bg-body-tertiary py-5 mt-lg-5"><div class="container text-body-secondary"><div class=row><div class="col-12 col-lg mb-2">© ctron's blog – All rights reserved</div><div class="col-12 col-lg"><ul class="list-unstyled mb-0"><li><a class=link-secondary href=https://dentrassi.de/legal/disclaimer/>Disclaimer</a><li><a class=link-secondary href=https://dentrassi.de/legal/impress/>Impressum / Impress</a><li><a class=link-secondary href=https://dentrassi.de/legal/privacy/>Datenschutzerklärung / Privacy Policy</a></ul></div><div class="col-12 col-lg"><a class=link-secondary href=https://dentrassi.de/legal/contact/>Contact</a></div></div></div></footer><script src="https://dentrassi.de/js/bootstrap.bundle.min.js?h=0833b2e9c3a26c258476"></script><script src="https://dentrassi.de/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer></script><script src="https://dentrassi.de/js/search.js?h=ed51a29cb343a0c8a535" defer></script><script>window.searchIndexLocation="https://dentrassi.de/search_index.en.json?h=0230877ec70ad303800d"</script>