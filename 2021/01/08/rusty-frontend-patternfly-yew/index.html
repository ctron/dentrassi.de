<!doctype html><html lang=en-US><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link as=font crossorigin href=https://dentrassi.de/files/jost-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/jost-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/jost-latin-700-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/noto-sans-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/noto-sans-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/noto-sans-latin-700-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/source-code-pro-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/source-code-pro-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://dentrassi.de/files/source-code-pro-latin-700-normal.woff2 rel=preload type=font/woff2><link href="https://dentrassi.de/main.css?h=0af1acb576d4063d05c1" rel=stylesheet><meta content="A while back I started to become a real Rust fanboy, so when I wanted to ‚Äúscratch an itch‚Äù of our car sharing booking system, of course I was using Rust for the backend. When it came to the frontend stuff, I was wondering if there is an alternative to JavaScript and so I found Yew Stack, which is simply awesome and allows for a full-Rust solution.
" name=description><meta content=article property=og:type><meta content="ctron's blog" property=og:site_name><meta content="A Rusty frontend: Patternfly & Yew" property=og:title><meta content=https://dentrassi.de/2021/01/08/rusty-frontend-patternfly-yew property=og:url><meta content="A while back I started to become a real Rust fanboy, so when I wanted to ‚Äúscratch an itch‚Äù of our car sharing booking system, of course I was using Rust for the backend. When it came to the frontend stuff, I was wondering if there is an alternative to JavaScript and so I found Yew Stack, which is simply awesome and allows for a full-Rust solution.
" property=og:description><meta content="Jens Reimann" property=og:author_name><meta content=https://dentrassi.de property=og:author_url><meta content=summary name=twitter:card><meta content=@ctron name=twitter:site><meta content="A Rusty frontend: Patternfly & Yew" name=twitter:title><meta content="A while back I started to become a real Rust fanboy, so when I wanted to ‚Äúscratch an itch‚Äù of our car sharing booking system, of course I was using Rust for the backend. When it came to the frontend stuff, I was wondering if there is an alternative to JavaScript and so I found Yew Stack, which is simply awesome and allows for a full-Rust solution.
" name=twitter:description><meta content=Frontend property=article:tag><meta content=Rust property=article:tag><title>A Rusty frontend: Patternfly & Yew ‚Äì ctron's blog</title><link href=https://dentrassi.de/2021/01/08/rusty-frontend-patternfly-yew/ rel=canonical><link href=https://dentrassi.de/rss.xml rel=alternate title=RSS type=application/rss+xml><script>var _paq=window._paq=window._paq||[];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function(){var a="https://logs.dentrassi.de/";_paq.push(['setTrackerUrl',a+ 'matomo.php']);_paq.push(['setSiteId','1']);var b=document,c=b.createElement('script'),d=b.getElementsByTagName('script')[0];c.async=true;c.src=a+ 'matomo.js';d.parentNode.insertBefore(c,d)})()</script><body data-bs-spy=scroll data-bs-target=#toc tabindex=0><nav class="navbar fixed-top navbar-expand-lg bg-body-tertiary"><div class=container><a class=navbar-brand href=https://dentrassi.de>ctron's blog</a><form class="de-c-search-form d-none d-lg-flex ms-auto me-3"><input placeholder="Search docs" aria-label=Search autocomplete=off class=form-control id=searchInput type=search><div class="shadow bg-white rounded" id=suggestions></div></form><div class="d-none d-md-flex ms-auto ms-lg-0 me-4 me-lg-0"><div class=row><div class=col><a title="Link to my GitHub profile" class=link-secondary href=https://github.com/ctron target=_blank> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> </a></div><div class=col><a title="Link to my Mastodon profile" class=link-secondary href=https://mastodon.dentrassi.de/@ctron rel=me target=_blank> <svg viewbox="0 0 24 24" fill=currentColor height=24 stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z"/></svg> </a></div><div class=col><a title="Link to my matrix address" class=link-secondary href=https://matrix.to/#%2F%40ctron%3Adentrassi.de target=_blank> <svg class="feather feather-message-square" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </a></div></div></div><button aria-label="Toggle navigation" aria-controls=rightSidebox aria-expanded=false class=navbar-toggler data-bs-target=#rightSidebox data-bs-toggle=collapse type=button><span class=navbar-toggler-icon></span></button></div></nav><div class="de-layout container"><div class="row d-flex align-items-start"><aside class="col-lg-2 order-last order-lg-0 sticky-lg-top mt-4 mt-lg-5"><div class="de-sidebox de-m-left"><div class=mb-4><h2>Projects</h2><ul class=list-unstyled><li><a class=link-body-emphasis href=/projects/patternfly-yew/>PatternFly Yew</a><li><a class=link-body-emphasis href=/projects/yew-oauth2/>Yew OAuth2</a><li><a class=link-body-emphasis href=/projects/trunk/>Trunk</a><li><a class=link-body-emphasis href=/projects/openshift-update-graph/>OpenShift Update Graph</a><li><a class=link-body-emphasis href=/projects/oidc-cli/>OIDC CLI</a><li><a class=link-body-emphasis href=/projects/rpm-builder/>Maven RPM Builder</a></ul></div><div class=mb-4><h2>More</h2><ul class=list-unstyled><li><a class=link-body-emphasis href=/pages/about/>About</a><li><a class=link-body-emphasis href=/pages/pgp-key/>PGP Key</a><li><a class=link-body-emphasis href=/pages/attic/>Attic</a></ul></div></div></aside><main class="col-12 col-lg-7 px-lg-5 mt-3 mt-lg-4"><article class=de-article itemscope itemtype=http://schema.org/BlogPosting><div><section class=de-article__header><h1 itemprop=headline>A Rusty frontend: Patternfly & Yew</h1><div><div class="de-c-post-meta text-muted"><ul class=list-inline><li class=list-inline-item><span>11 minute read</span> <meta content=2176 itemprop=wordCount> <span class=d-none itemprop=author itemscope itemtype=https://schema.org/Person> <a href=https://dentrassi.de itemprop=url> <span itemprop=name>Jens Reimann</span> </a> </span><li class=list-inline-item><span content=2021-01-08T17:52:54+01:00 itemprop=datePublished> 8 January 2021</span><li class=list-inline-item><span><a class=link-secondary href=/categories/development>Development</a></span></ul><ul class=list-inline><li class=list-inline-item><a class=link-secondary href=https://dentrassi.de/tags/frontend/>#frontend</a> <span> </span> <a class=link-secondary href=https://dentrassi.de/tags/rust/>#rust</a> <span> </span></ul></div></div></section><hr><section class=de-article__body itemprop=articleBody><p>A while back I started to become a real Rust fanboy, so when I wanted to ‚Äúscratch an itch‚Äù of <a rel="noopener nofollow noreferrer" href=https://www.elkato.de/ target=_blank>our car sharing booking system</a>, of course I was using Rust for the backend. When it came to the frontend stuff, I was wondering if there is an alternative to JavaScript and so I found <a rel="noopener nofollow noreferrer" href=https://yew.rs target=_blank>Yew Stack</a>, which is simply awesome and allows for a full-Rust solution.</p><span id=continue-reading></span><h2 id=the-setting>The setting</h2><p>So we are part of a car sharing community, and that community uses a web based system to book cars. Plain and simple. Every now and then you run into use cases that the booking system doesn‚Äôt cover. If it would have some simply API, that wouldn‚Äôt be an issue, but all that is does is serve HTML which, well ‚Ä¶ let‚Äôs just say I am impressed that modern day browsers still render this.<p>Unfortunately this solution isn‚Äôt open source, and beside that it is a MS Access ‚Äúapplication‚Äù coded in Visual Basic if I am informed correctly. So staying away from that is my top priority.<h2 id=creating-an-api>Creating an API</h2><p>Serving an API in Rust is simple. There are a bunch of choices, <a rel="noopener nofollow noreferrer" href=https://github.com/actix/actix-web target=_blank>actix-web</a> being one of them. The bigger issue was, how to I get access to the data?<p>If a browser can still interpret the HTML, maybe I can write some code to scrape the booking details from those pages? And yes, a bit of Rust, using the <a rel="noopener nofollow noreferrer" href=https://github.com/Geal/nom target=_blank>nom</a> parser library, and I was able the creating an asynchronous ‚Äústream‚Äù of Bookings, backed by paging requests to the original web frontend, scraping booking and paging information out of the web pages:<pre class=language-rust data-lang=rust style=background:#fafafa;color:#383a42><code class=language-rust data-lang=rust><span style=color:#a626a4>let</span><span> now </span><span style=color:#a626a4>= </span><span>Local::now().</span><span style=color:#0184bc>with_timezone</span><span>(</span><span style=color:#a626a4>&</span><span>Utc);
</span><span style=color:#a626a4>let</span><span> bookings: Vec&LTBooking> </span><span style=color:#a626a4>=</span><span> client
</span><span>    .</span><span style=color:#0184bc>list_bookings</span><span>(
</span><span>        User {
</span><span>            club: </span><span style=color:#50a14f>"abc"</span><span>.</span><span style=color:#0184bc>into</span><span>(),
</span><span>            username: </span><span style=color:#50a14f>"def"</span><span>.</span><span style=color:#0184bc>into</span><span>(),
</span><span>            password: Some(</span><span style=color:#50a14f>"123"</span><span>.</span><span style=color:#0184bc>into</span><span>()),
</span><span>        },
</span><span>        ListOptions {
</span><span>            owner: Some(</span><span style=color:#50a14f>"def"</span><span>.</span><span style=color:#0184bc>into</span><span>()),
</span><span>            start_from: Some(now.</span><span style=color:#0184bc>date</span><span>() </span><span style=color:#a626a4>- </span><span>Duration::days(</span><span style=color:#c18401>7</span><span>)),
</span><span>            end_to: Some(now.</span><span style=color:#0184bc>date</span><span>() </span><span style=color:#a626a4>+ </span><span>Duration::days(</span><span style=color:#c18401>7</span><span>)),
</span><span>            </span><span style=color:#a626a4>..</span><span>Default::default()
</span><span>        },
</span><span>    )
</span><span>    .</span><span style=color:#0184bc>boxed</span><span>()
</span><span>    .</span><span style=color:#0184bc>try_collect</span><span>()
</span><span>    .await</span><span style=color:#a626a4>?</span><span>;
</span><span>
</span><span style=color:#a626a4>for</span><span> booking </span><span style=color:#a626a4>in &</span><span>bookings {
</span><span>    println!(</span><span style=color:#50a14f>"</span><span style=color:#c18401>{:?}</span><span style=color:#50a14f>"</span><span>, booking);
</span><span>}
</span></code></pre><p>That was simpler than expected (ok, writing that async-stream iterator with paging was not, but the overall solution up to this point was). But I ended up with a 12 MiB (yes, ‚Äúmegabyte‚Äù) service that provided me an API for the booking system. At least the API that I needed to scratch my itch. No gigabytes of Spring Boot application, plain and simple.<h2 id=allergic-to-javascript-here-is-a-way-out>Allergic to JavaScript? Here is a way out!</h2><p>The truth is, I am not a frontend guy. Yes, I did some PHP in the past, and I can create some Bootstrap blog theme. But all the ‚Äúnew‚Äù JavaScript approaches give me the creeps. The number of components and steps involved to render some basic HTML and CSS in the browser as simply insane. True, the pattern of ‚Äúrunning‚Äù a web frontend application in the browser is nice. Only fetching data through APIs, compared to fetching the full rendered view all the time. But to me, JavaScript is still a pure nightmare, and TypeScript is not the solution.<p>I knew that Rust and WASM was a thing, so I looked around what was available and found <a rel="noopener nofollow noreferrer" href=https://yew.rs/ target=_blank>Yew Stack</a>. The idea of yew is pretty simple: enable people to create a <a rel="noopener nofollow noreferrer" href=https://reactjs.org/ target=_blank>ReactJS</a> style application in pure Rust. It describes itself as:<blockquote><p><strong>Yew</strong> is a modern <a rel="noopener nofollow noreferrer" href=https://www.rust-lang.org/ target=_blank>Rust</a> framework for creating multi-threaded front-end web apps with <a rel="noopener nofollow noreferrer" href=https://webassembly.org/ target=_blank>WebAssembly</a>.<p><cite>The Yew homepage</cite></blockquote><p>Just was I was looking for!<h2 id=concepts-of-yew>Concepts of Yew</h2><p>Getting started with Yew is pretty simple. There are a few concepts you need to learn and embrace, otherwise you might have a hard time. Don‚Äôt think of it as a ‚Äúweb page‚Äù, more like a ‚Äúweb application‚Äù. People using ReactJS might already be familiar with that, but if you are used to ‚Äúrendering‚Äù HTML views, it might take a bit. Basically everything is running in the browser, where you have a tree of <a rel="noopener nofollow noreferrer" href=https://yew.rs/docs/en/concepts/html/components target=_blank>components</a>. Each component has a state, a way to render the state, and a way to update the state by sending messages to a component. Yew takes care of orchestrating this internally. So when the state of your component changes, Yew will ask you to re-render yourself, and generates and applies a diff to the DOM tree of your HTML document. Letting the browser render only changed parts.<p>It will look something like this:<pre class=language-rust data-lang=rust style=background:#fafafa;color:#383a42><code class=language-rust data-lang=rust><span style=color:#a626a4>impl </span><span>MyComponent </span><span style=color:#a626a4>for </span><span>Container {
</span><span>    </span><span style=color:#a626a4>type </span><span>Properties </span><span style=color:#a626a4>=</span><span> MyProps;
</span><span>    </span><span style=color:#a626a4>type </span><span>Messages </span><span style=color:#a626a4>=</span><span> MyMsg;
</span><span>
</span><span>    </span><span style=color:#a626a4>fn </span><span style=color:#0184bc>update</span><span>(</span><span style=color:#a626a4>&</span><span style=color:#e45649>self</span><span>, </span><span style=color:#e45649>msg</span><span>: MyMsg) -> ShouldRender {
</span><span>        </span><span style=color:#a626a4>match</span><span> msg {
</span><span>            MyMsg::ChangeMyState() </span><span style=color:#a626a4>=> </span><span style=color:#e45649>self</span><span>.counter </span><span style=color:#a626a4>+= </span><span style=color:#c18401>1
</span><span>        }
</span><span>        </span><span style=color:#c18401>true
</span><span>    }
</span><span>    
</span><span>    </span><span style=color:#a626a4>fn </span><span style=color:#0184bc>view</span><span>(</span><span style=color:#a626a4>&</span><span style=color:#e45649>self</span><span>) -> Html {
</span><span>       html! {
</span><span>           </span><span style=color:#a626a4><</span><span>div id</span><span style=color:#a626a4>=</span><span style=color:#50a14f>"container"</span><span style=color:#a626a4>>
</span><span>               </span><span style=color:#a626a4><</span><span>span</span><span style=color:#a626a4>></span><span>{ </span><span style=color:#e45649>self</span><span>.counter }</span><span style=color:#a626a4>&LT/</span><span>span</span><span style=color:#a626a4>>
</span><span>               { </span><span style=color:#e45649>self</span><span>.props.children.</span><span style=color:#0184bc>clone</span><span>() }
</span><span>           </span><span style=color:#a626a4>&LT/</span><span>div</span><span style=color:#a626a4>>
</span><span>       }
</span><span>    }
</span><span>}
</span></code></pre><p>As mentioned, the concept is similar to ReactJS in the web world, or <a rel="noopener nofollow noreferrer" href=https://flutter.dev/ target=_blank>Flutter</a> in the app world. Just that you can use Rust, instead of JavaScript or Dart.<h2 id=the-frontend-stack>The frontend stack</h2><p>One thing that is missing in Yew, is a component library. And for good reason! Yew is built on browser features manipulating the DOM tree. But it does not force you into using a specific web framework, like Bootstrap or <a rel="noopener nofollow noreferrer" href=https://bulma.io/ target=_blank>Bulma</a> (though I have to say, I really like Bulma, and there is a project called <a rel="noopener nofollow noreferrer" href=https://github.com/thedodd/ybc target=_blank>ybc</a>, which provides Yew components for Bulma already).<p>And while I am already using Bulma for other stuff, it felt a bit too homepagey to me. I was hoping for some more data/controls oriented CSS components. So I was looking into the direction of <a rel="noopener nofollow noreferrer" href=https://www.patternfly.org/v4/ target=_blank>Patternfly</a>. And while I might be a bit closer to Patternyfly, I still use other CSS frameworks for other stuff as well. But I also had some hopes that I could re-use the work for the <a rel="noopener nofollow noreferrer" href=https://blog.drogue.io/ target=_blank>Rust IoT stuff</a> I am working on.<p>So I started to create some <a rel="noopener nofollow noreferrer" href=https://github.com/ctron/patternfly-yew target=_blank>Patternfly components for Rust</a>, backed by Yew stack. And while it definitely was a bit slower than simply re-using the existing Bulma components, I was pretty soon able to create the fronted I needed, and learned a lot about Yew on the way.<figure><p><a rel="noopener nofollow noreferrer" href=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Elkato-extras-e1610120101881.png target=_blank><img alt="Screenshot of bookings view" src=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Elkato-extras-e1610120101881.png></a><figcaption>Screenshot of bookings view</figcaption></figure><h2 id=more-components>More components</h2><p>That early example comes from a while back. As always, when you start something, and you like it, you might re-use it yourself. So every now and then, I need some more components, and simply map them:<p><a rel="noopener nofollow noreferrer" href=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Patternfly-Yew-Quickstart-1.png target=_blank><img alt src=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Patternfly-Yew-Quickstart-1-1024x881.png></a><p><a rel="noopener nofollow noreferrer" href=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Patternfly-Yew-Quickstart-3.png target=_blank><img alt src=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Patternfly-Yew-Quickstart-3-1024x935.png></a><p><a rel="noopener nofollow noreferrer" href=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Patternfly-Yew-Quickstart-4.png target=_blank><img alt src=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Patternfly-Yew-Quickstart-4-1024x472.png></a><p><a rel="noopener nofollow noreferrer" href=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Patternfly-Yew-Quickstart.png target=_blank><img alt src=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Patternfly-Yew-Quickstart-1024x782.png></a><p><a rel="noopener nofollow noreferrer" href=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Drogue-IoT-Console.png target=_blank><img alt src=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Drogue-IoT-Console-1024x881.png></a><p><a rel="noopener nofollow noreferrer" href=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Drogue-IoT-Console-2-e1610121200551.png target=_blank><img alt src=https://dentrassi.de/wp-content/uploads/Screenshot_2021-01-08-Drogue-IoT-Console-2-e1610121200551-1024x443.png></a><h2 id=lessons-learned>Lessons learned</h2><p>First of all, writing web frontends in Rust is fun. At least if you are a Rust fanboy. You can leverage your existing knowledge an experience from other Rust projects, and while I definitely has to learn a few new things, it feels much more ‚Äúhome‚Äù than doing the same in JavaScript.<h3 id=no-more-javascript-mostly>No more JavaScript ‚Ä¶ mostly</h3><p>All of the compile time checking that Rust offers, are just as helpful in the web world. Assigning a wrong type to a property, forgot to add a match-clause after adding a new enum literal, all caught by the compiler (like calling a wrong method or passing in wrong arguments). No more <a href="https://www.youtube.com/watch?v=et8xNAc2ic8" rel="noopener nofollow noreferrer" target=_blank>JavaScript madness</a>!<p>Well ‚Ä¶ not fully. First of all, you need to package your web application somehow. Which means that you need to also include Patternfly, and also may need to run a SASS compiler. Packaging all that up, <code>wasm-pack</code> and thus <code>npm</code> and <code>webpack</code> might come in handy. Still, this is only used for running parts of the build, but it requires you to have a Node JS installation, or a least a container of that.<p>Second: every now and then, you need to integrate with some existing JavaScript library or browser API. Patternfly for example places popovers using <a rel="noopener nofollow noreferrer" href=https://popper.js.org/ target=_blank>popper.js</a>, and so you somehow need to integrate that into your Rust web application. The bright side of that is, using <code>wasm-bind</code> and the Yew component system, you can easily hide all of that behind a nice API. It is pretty similar to interfacing Rust to C using FFI.<p>On the other side, a bit of JavaScript, hidden behind proper APIs, isn‚Äôt too bad if you can use Rust for all the other parts of the backend and frontend. And yes, you can actually re-use the same code from the backend in the frontend as well.<h3 id=yew-stack>Yew Stack</h3><p>Yew is a great framework. But it also can be quite overwhelming when getting started. True, the documentation of Yew could be better, and yes I didn‚Äôt contribute as much as I could. Shame on me. However, the Yew community has a few <a rel="noopener nofollow noreferrer" href=https://discord.gg/VQck8X4 target=_blank>discord channels</a> and is willing to help.<h3 id=wasm>WASM</h3><p>Initially I wasn‚Äôt sure if all browsers, desktop and mobile, would be happy executing WASM, but so far, I didn‚Äôt have any issues. Fingers crossed!<h2 id=i-even-could>I even could‚Ä¶</h2><p>One concern that came up when demoing the solution was, that my backend would get access to the login credentials of the booking system. Yes, that system is using HTTP authentication instead of any kind of tokens, so the backend actually has the plain password. It doesn‚Äôt store the password, that is persisted in the browser storage on the client device. But the API backend needs to pass on the credentials from the user to the original backend system.<p>As the frontend can run all kinds of Rust code, even the booking system client library that I wrote, it would be possible to put the client code directly into the frontend. Remember, the backend only executes some HTTP calls to the booking system and scrapes the HTML pages for data. So the browser could download the packaged WASM application from any server, and never would need to call into any intermediate backend.<p>However, there are two downsides to this approach. First, I would need to let go of my hard-learned async-stream iterator client, as the WASM part cannot use raw TCP sockets in the browser, it needs to use the Request API of the browser to perform HTTP requests. As HTTP client I used <a rel="noopener nofollow noreferrer" href=https://github.com/seanmonstar/reqwest target=_blank>reqwest</a>, which has both an async and sync API and has an implementation for native sockets, but also for the <a rel="noopener nofollow noreferrer" href=https://github.com/seanmonstar/reqwest/tree/master/src/wasm target=_blank>Request API of the browser</a>. Unfortunately, it doesn‚Äôt provide an implementation of the async API using the browser backend. The second reason for having a standalone API is, that this would allow others to use this API as well, but not force them to use Rust. Still, adding a sync version of my API in the future, for using in the frontend, wouldn‚Äôt be a problem, and only hurt my pride üòÅ<h2 id=conclusion>Conclusion</h2><p>If you are a fan of Rust and allergic to JavaScript as well, you might appreciate Yew and maybe the <a rel="noopener nofollow noreferrer" href=https://github.com/ctron/patternfly-yew target=_blank>Patternfly components for Yew</a>. You can take a quick look at <a rel="noopener nofollow noreferrer" href=https://github.com/ctron/patternfly-yew-quickstart target=_blank>the quickstart application</a>, or direct your browser to <a rel="noopener nofollow noreferrer" href=https://ctron.github.io/patternfly-yew-quickstart/ target=_blank>the running version</a> of that.<p>I was able to not only able parse the ancient HTML 3-ish output of our booking system, but also able to provide a decent API and state of the art web frontend. All using the same programming language, re-using my Rust experience and even data structures and code between frontend and backend. Fixing my original problem with truly small service.<p>While you already can do quite a lot, the Patternfly Yew components are far from complete. A bunch of components and properties are still missing. As needed I will be adding new features over time, but contributions are always welcome üòâ<h2 id=see-also>See also</h2><ul><li>Yew ‚Äì <a rel="noopener nofollow noreferrer" href=https://yew.rs target=_blank>https://yew.rs</a><li>Elkato API ‚Äì <a rel="noopener nofollow noreferrer" href=https://github.com/ctron/elkato-api target=_blank>https://github.com/ctron/elkato-api</a><li>PatternFly ‚Äì <a rel="noopener nofollow noreferrer" href=https://www.patternfly.org/v4/ target=_blank>https://www.patternfly.org/v4/</a><li>PatternFly Yew Components ‚Äì <a rel="noopener nofollow noreferrer" href=https://github.com/ctron/patternfly-yew target=_blank>https://github.com/ctron/patternfly-yew</a><li>PatternFly Yew Quickstart ‚Äì <a rel="noopener nofollow noreferrer" href=https://github.com/ctron/patternfly-yew-quickstart target=_blank>https://github.com/ctron/patternfly-yew-quickstart</a><li>PatternFly Yew Demo ‚Äì <a rel="noopener nofollow noreferrer" href=https://ctron.github.io/patternfly-yew-quickstart/ target=_blank>https://ctron.github.io/patternfly-yew-quickstart/</a></ul></section></div></article></main><aside class="col-lg-3 order-first order-lg-0 sticky-top mt-lg-5 de-m-collapsible"><div class="de-sidebox de-m-right collapse d-lg-block" id=rightSidebox><div class="d-flex d-md-none pb-3"><div class=row><div class=col><a title="Link to my GitHub profile" class=link-secondary href=https://github.com/ctron target=_blank> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> </a></div><div class=col><a title="Link to my Mastodon profile" class=link-secondary href=https://mastodon.dentrassi.de/@ctron rel=me target=_blank> <svg viewbox="0 0 24 24" fill=currentColor height=24 stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z"/></svg> </a></div><div class=col><a title="Link to my matrix address" class=link-secondary href=https://matrix.to/#%2F%40ctron%3Adentrassi.de target=_blank> <svg class="feather feather-message-square" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </a></div></div></div><div class="de-c-toc mb-4"><h2>Table of Content</h2><ul class="list-unstyled de-c-toc__first" id=toc><li><a class=link-body-emphasis href=#the-setting>The setting</a><li><a class=link-body-emphasis href=#creating-an-api>Creating an API</a><li><a class=link-body-emphasis href=#allergic-to-javascript-here-is-a-way-out>Allergic to JavaScript? Here is a way out!</a><li><a class=link-body-emphasis href=#concepts-of-yew>Concepts of Yew</a><li><a class=link-body-emphasis href=#the-frontend-stack>The frontend stack</a><li><a class=link-body-emphasis href=#more-components>More components</a><li><a class=link-body-emphasis href=#lessons-learned>Lessons learned</a> <ul class="list-unstyled de-c-toc__second"><li><a class=link-body-emphasis href=#no-more-javascript-mostly>No more JavaScript ‚Ä¶ mostly</a><li><a class=link-body-emphasis href=#yew-stack>Yew Stack</a><li><a class=link-body-emphasis href=#wasm>WASM</a></ul><li><a class=link-body-emphasis href=#i-even-could>I even could‚Ä¶</a><li><a class=link-body-emphasis href=#conclusion>Conclusion</a><li><a class=link-body-emphasis href=#see-also>See also</a></ul></div><div class="d-lg-block d-none"><div class="de-c-recent-posts mb-2"><h2 class=d-flex><span>Recent Posts</span> <span class=de-c-title__action> <a href=https://dentrassi.de/archive>Archive</a> </span></h2><ul class=list-unstyled><li><a title="ReSyMo: Remote System Monitoring" class=link-body-emphasis href=/2024/04/07/remote-system-monitoring/>ReSyMo: Remote System Monitoring</a><li><a title="An OpenID Connect command line client" class=link-body-emphasis href=/2024/03/16/oidc-command-line-client/>An OpenID Connect command line client</a><li><a title="Release of Trunk 0.19.0" class=link-body-emphasis href=/2024/03/11/trunk-0-19-0/>Release of Trunk 0.19.0</a><li><a title="Good news everyone: Trunk is back" class=link-body-emphasis href=/2024/01/16/good-news-everyone/>Good news everyone: Trunk is back</a><li><a title="Yew components for OpenID connect and OAuth2" class=link-body-emphasis href=/2023/10/22/yew-oauth2/>Yew components for OpenID connect and OAuth2</a></ul></div></div><div class="de-c-toc mb-4"><h2 class=d-flex><span>Categories</span> <span class=de-c-title__action> <a href=https://dentrassi.de/categories>All</a> </span></h2><ul class=list-unstyled><li><a class=link-body-emphasis href=https://dentrassi.de/categories/development/>Development</a><li><a class=link-body-emphasis href=https://dentrassi.de/categories/technical-stuff/>Technical Stuff</a></ul></div><div class="de-c-toc mb-4"><h2 class=d-flex><span>Tags</span> <span class=de-c-title__action> <a href=https://dentrassi.de/tags>All</a> </span></h2><a class=link-body-emphasis href=https://dentrassi.de/tags/frontend/>#frontend</a><span> </span><a class=link-body-emphasis href=https://dentrassi.de/tags/rust/>#rust</a><span> </span></div></div></aside></div></div><footer class="bg-body-tertiary py-5 mt-lg-5"><div class="container text-body-secondary"><div class=row><div class="col-12 col-lg mb-2">¬© ctron's blog ‚Äì All rights reserved</div><div class="col-12 col-lg"><ul class="list-unstyled mb-0"><li><a class=link-secondary href=https://dentrassi.de/legal/disclaimer/>Disclaimer</a><li><a class=link-secondary href=https://dentrassi.de/legal/impress/>Impressum / Impress</a><li><a class=link-secondary href=https://dentrassi.de/legal/privacy/>Datenschutzerkl√§rung / Privacy Policy</a></ul></div><div class="col-12 col-lg"><a class=link-secondary href=https://dentrassi.de/legal/contact/>Contact</a></div></div></div></footer><script src="https://dentrassi.de/js/bootstrap.bundle.min.js?h=0833b2e9c3a26c258476"></script><script src="https://dentrassi.de/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer></script><script src="https://dentrassi.de/js/search.js?h=ed51a29cb343a0c8a535" defer></script><script>window.searchIndexLocation="https://dentrassi.de/search_index.en.json?h=1ff347bd808ae326cbe2"</script>