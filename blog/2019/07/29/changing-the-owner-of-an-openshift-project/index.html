<!doctype html><html lang=en-US><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link as=font crossorigin href=https://staging.dentrassi.de/files/jost-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/jost-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/jost-latin-700-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/noto-sans-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/noto-sans-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/noto-sans-latin-700-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/source-code-pro-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/source-code-pro-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/source-code-pro-latin-700-normal.woff2 rel=preload type=font/woff2><link href=https://staging.dentrassi.de/main.css rel=stylesheet><meta content="Today I wanted to change the owner of an OpenShift project. It actually is rather trivial. However finding out how, wasn’t so easy. Googling didn’t help much, and also the documentation has room for improvement. So I took a few minutes to document how it works.
" name=description><meta content=article property=og:type><meta content="ctron's blog" property=og:site_name><meta content="Changing the owner of an OpenShift project" property=og:title><meta content=https://staging.dentrassi.de/blog/2019/07/29/changing-the-owner-of-an-openshift-project property=og:url><meta content="Today I wanted to change the owner of an OpenShift project. It actually is rather trivial. However finding out how, wasn’t so easy. Googling didn’t help much, and also the documentation has room for improvement. So I took a few minutes to document how it works.
" property=og:description><meta content="Jens Reimann" property=og:author_name><meta content=https://dentrassi.de property=og:author_url><meta content=summary name=twitter:card><meta content=@ctron name=twitter:site><meta content="Changing the owner of an OpenShift project" name=twitter:title><meta content="Today I wanted to change the owner of an OpenShift project. It actually is rather trivial. However finding out how, wasn’t so easy. Googling didn’t help much, and also the documentation has room for improvement. So I took a few minutes to document how it works.
" name=twitter:description><title>ctron's blog</title><link href=https://staging.dentrassi.de/rss.xml rel=alternate title=RSS type=application/rss+xml><body data-bs-spy=scroll data-bs-target=#toc tabindex=0><nav class="navbar fixed-top navbar-expand-lg bg-body-tertiary"><div class=container><a class=navbar-brand href=https://staging.dentrassi.de>ctron's blog</a><form class="de-c-search-form d-none d-lg-flex ms-auto me-3"><input placeholder="Search docs" aria-label=Search autocomplete=off class=form-control id=searchInput type=search><div class="shadow bg-white rounded" id=suggestions></div></form><div class="d-none d-md-flex ms-auto ms-lg-0 me-4 me-lg-0"><div class=row><div class=col><a title="Link to my GitHub profile" class=link-secondary href=https://github.com/ctron target=_blank> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> </a></div><div class=col><a title="Link to my Mastodon profile" class=link-secondary href=https://mastodon.dentrassi.de/@ctron target=_blank> <svg viewbox="0 0 24 24" fill=currentColor height=24 stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z"/></svg> </a></div><div class=col><a title="Link to my matrix address" class=link-secondary href=https://matrix.to/#%2F%40ctron%3Adentrassi.de target=_blank> <svg class="feather feather-message-square" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </a></div></div></div><button aria-label="Toggle navigation" aria-controls=rightSidebox aria-expanded=false class=navbar-toggler data-bs-target=#rightSidebox data-bs-toggle=collapse type=button><span class=navbar-toggler-icon></span></button></div></nav><div class="de-layout container"><div class="row d-flex align-items-start"><aside class="col-lg-2 order-last order-lg-0 sticky-lg-top mt-4 mt-lg-5"><div class="de-sidebox de-m-left"><div class=mb-4><h2>More</h2><ul class=list-unstyled><li><a class=link-body-emphasis href=/pages/about/>About</a><li><a class=link-body-emphasis href=/pages/pgp-key/>PGP Key</a><li><a class=link-body-emphasis href=/pages/attic/>Attic</a></ul></div><div class=mb-4><h2>Projects</h2><ul class=list-unstyled><li><a class=link-body-emphasis href=/projects/patternfly-yew/>PatternFly Yew</a><li><a class=link-body-emphasis href=/projects/yew-oauth2/>Yew OAuth2</a><li><a class=link-body-emphasis href=/projects/rpm-builder/>Maven RPM Builder</a><li><a class=link-body-emphasis href=/projects/drogue-iot/>Drogue IoT</a><li><a class=link-body-emphasis href=/projects/openshift-update-graph/>OpenShift Update Graph</a><li><a class=link-body-emphasis href=/projects/ecliipse-iot-packages/>Eclipse IoT Packages</a></ul></div></div></aside><main class="col-12 col-lg-7 px-lg-5 mt-3 mt-lg-4"><article class=de-article itemscope itemtype=http://schema.org/BlogPosting><div><section class=de-article__header><h1 itemprop="name headline">Changing the owner of an OpenShift project</h1><div><ul class="de-c-post-meta list-inline text-muted"><li class=list-inline-item><span>3 minute read</span> <meta content=402 itemprop=wordCount> <span class=d-none itemprop=author itemscope itemtype=https://schema.org/Person> <a href=https://dentrassi.de itemprop=url> <span itemprop=name>Jens Reimann</span> </a> </span><li class=list-inline-item><span content=2019-07-29 itemprop=datePublished>29 July 2019</span></ul></div></section><hr><section class=de-article__body itemprop=articleBody><p>Today I wanted to change the owner of an OpenShift project. It actually is rather trivial. However finding out how, wasn’t so easy. Googling didn’t help much, and also the documentation has room for improvement. So I took a few minutes to document how it works.</p><span id=continue-reading></span><h2 id=pre-requisites>Pre-requisites</h2><p>Of course you need to start with a user that already has access to the project. I will assume that you have the <code>oc</code> command installed, and are logged on to your cluster. Also I will assume that your new user is <code>newuser</code> and the project name is <code>test</code>.<h2 id=making-the-change>Making the change</h2><p>The access to the project is tied to the cluster role <code>admin</code> for the project. Each project has a “role binding” (not a “cluster role binding”) named <code>admin</code>, which binds the “cluster role” <code>admin</code> to the user, for a specific project.<p>Assuming that the user <code>admin</code> created the project <code>test</code>, doing <code>oc -n test rolebinding admin -o yaml</code> would give you:<pre class=language-yaml data-lang=yaml style=background:#fafafa;color:#383a42><code class=language-yaml data-lang=yaml><span style=color:#e45649>apiVersion</span><span>: </span><span style=color:#50a14f>rbac.authorization.k8s.io/v1
</span><span style=color:#e45649>kind</span><span>: </span><span style=color:#50a14f>RoleBinding
</span><span style=color:#e45649>metadata</span><span>:
</span><span>  </span><span style=color:#e45649>name</span><span>: </span><span style=color:#50a14f>admin
</span><span>  </span><span style=color:#e45649>namespace</span><span>: </span><span style=color:#50a14f>test
</span><span style=color:#e45649>roleRef</span><span>:
</span><span>  </span><span style=color:#e45649>apiGroup</span><span>: </span><span style=color:#50a14f>rbac.authorization.k8s.io
</span><span>  </span><span style=color:#e45649>kind</span><span>: </span><span style=color:#50a14f>ClusterRole
</span><span>  </span><span style=color:#e45649>name</span><span>: </span><span style=color:#50a14f>admin
</span><span style=color:#e45649>subjects</span><span>:
</span><span>- </span><span style=color:#e45649>apiGroup</span><span>: </span><span style=color:#50a14f>rbac.authorization.k8s.io
</span><span>  </span><span style=color:#e45649>kind</span><span>: </span><span style=color:#50a14f>User
</span><span>  </span><span style=color:#e45649>name</span><span>: </span><span style=color:#50a14f>admin
</span></code></pre><p>Now you can simply replace (or add) the subject in the <code>subjects</code> list. Moving the project over to <code>newuser</code> would look like this:<pre class=language-yaml data-lang=yaml style=background:#fafafa;color:#383a42><code class=language-yaml data-lang=yaml><span style=color:#e45649>apiVersion</span><span>: </span><span style=color:#50a14f>rbac.authorization.k8s.io/v1
</span><span style=color:#e45649>kind</span><span>: </span><span style=color:#50a14f>RoleBinding
</span><span style=color:#e45649>metadata</span><span>:
</span><span>  </span><span style=color:#e45649>name</span><span>: </span><span style=color:#50a14f>admin
</span><span>  </span><span style=color:#e45649>namespace</span><span>: </span><span style=color:#50a14f>test
</span><span style=color:#e45649>roleRef</span><span>:
</span><span>  </span><span style=color:#e45649>apiGroup</span><span>: </span><span style=color:#50a14f>rbac.authorization.k8s.io
</span><span>  </span><span style=color:#e45649>kind</span><span>: </span><span style=color:#50a14f>ClusterRole
</span><span>  </span><span style=color:#e45649>name</span><span>: </span><span style=color:#50a14f>admin
</span><span style=color:#e45649>subjects</span><span>:
</span><span>- </span><span style=color:#e45649>apiGroup</span><span>: </span><span style=color:#50a14f>rbac.authorization.k8s.io
</span><span>  </span><span style=color:#e45649>kind</span><span>: </span><span style=color:#50a14f>User
</span><span>  </span><span style=color:#e45649>name</span><span>: </span><span style=color:#50a14f>newuser
</span></code></pre><h2 id=the-one-liner>The one liner</h2><p>The <code>oc</code> command line tool can actually do this for you with a single call:<pre class=language-bash data-lang=bash style=background:#fafafa;color:#383a42><code class=language-bash data-lang=bash><span style=color:#e45649>oc</span><span> policy add-role-to-user admin newuser</span><span style=color:#e45649> -n</span><span> test
</span></code></pre><p>Of course this only adds the new user, but you can also remove the old user by:<pre class=language-bash data-lang=bash style=background:#fafafa;color:#383a42><code class=language-bash data-lang=bash><span style=color:#e45649>oc</span><span> policy remove-role-from-user admin olduser</span><span style=color:#e45649> -n</span><span> test
</span></code></pre><h2 id=one-more-thing>One more thing</h2><p>When you take a look at the list of projects in the Web UI, you will still see the old user as the “requester”:<p><img alt="Web UI project list" src=https://dentrassi.de/wp-content/uploads/ocp_projects_test.png><p>This information is read from the annotation <code>openshift.io/requester</code> from the “project”:<pre class=language-yaml data-lang=yaml style=background:#fafafa;color:#383a42><code class=language-yaml data-lang=yaml><span style=color:#e45649>apiVersion</span><span>: </span><span style=color:#50a14f>project.openshift.io/v1
</span><span style=color:#e45649>kind</span><span>: </span><span style=color:#50a14f>Project
</span><span style=color:#e45649>metadata</span><span>:
</span><span>  </span><span style=color:#e45649>annotations</span><span>:
</span><span>    </span><span style=color:#e45649>openshift.io/description</span><span>: </span><span style=color:#50a14f>""
</span><span>    </span><span style=color:#e45649>openshift.io/display-name</span><span>: </span><span style=color:#50a14f>""
</span><span>    </span><span style=color:#e45649>openshift.io/requester</span><span>: </span><span style=color:#50a14f>admin
</span><span>  </span><span style=color:#e45649>name</span><span>: </span><span style=color:#50a14f>test
</span><span style=color:#50a14f>…
</span></code></pre><p>Unfortunately OpenShift considers the project information immutable. However the OpenShift “project” is backed by the Kubernetes “namespace”, which has the same annotation and it allows editing. So you can change the “requester” there, and it will be reflected in the project as well.</section></div></article></main><aside class="col-lg-3 order-first order-lg-0 sticky-top mt-lg-5 de-m-collapsible"><div class="de-sidebox de-m-right collapse d-lg-block" id=rightSidebox><div class="d-flex d-md-none pb-3"><div class=row><div class=col><a title="Link to my GitHub profile" class=link-secondary href=https://github.com/ctron target=_blank> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> </a></div><div class=col><a title="Link to my Mastodon profile" class=link-secondary href=https://mastodon.dentrassi.de/@ctron target=_blank> <svg viewbox="0 0 24 24" fill=currentColor height=24 stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z"/></svg> </a></div><div class=col><a title="Link to my matrix address" class=link-secondary href=https://matrix.to/#%2F%40ctron%3Adentrassi.de target=_blank> <svg class="feather feather-message-square" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </a></div></div></div><div class="de-c-toc mb-4"><h2>Table of Content</h2><ul class="list-unstyled de-c-toc__first" id=toc><li><a class=link-body-emphasis href=#pre-requisites>Pre-requisites</a><li><a class=link-body-emphasis href=#making-the-change>Making the change</a><li><a class=link-body-emphasis href=#the-one-liner>The one liner</a><li><a class=link-body-emphasis href=#one-more-thing>One more thing</a></ul></div><div class="d-lg-block d-none"><div class="de-c-recent-posts mb-2"><h2 class=d-flex><span>Recent Posts</span> <span class=de-c-title__action> <a href=https://staging.dentrassi.de/archive>Archive</a> </span></h2><ul class=list-unstyled><li><a title="Using Ingress on OpenShift backed by Routes" class=link-body-emphasis href=/blog/2021/05/21/using-ingress-on-openshift-backed-by-routes/>Using Ingress on OpenShift backed by Routes</a><li><a title="Recovering from an expired OpenShift certificate" class=link-body-emphasis href=/blog/2021/01/18/recovering-from-an-expired-openshift-certificate/>Recovering from an expired OpenShift certificate</a><li><a title="A Rusty frontend: Patternfly & Yew" class=link-body-emphasis href=/blog/2021/01/08/rusty-frontend-patternfly-yew/>A Rusty frontend: Patternfly & Yew</a><li><a title="OpenShift Update Graph Visualizer, lessons learned" class=link-body-emphasis href=/blog/2020/08/02/openshift-update-graph-visualizer-lessons-learned/>OpenShift Update Graph Visualizer, lessons learned</a><li><a title="Quarkus – Supersonic Subatomic IoT" class=link-body-emphasis href=/blog/2020/06/30/quarkus-supersonic-subatomic-iot/>Quarkus – Supersonic Subatomic IoT</a></ul></div></div></div></aside></div></div><footer class="bg-body-tertiary py-5 mt-lg-5"><div class="container text-body-secondary"><div class=row><div class="col-12 col-lg mb-2">© ctron's blog – All rights reserved</div><div class="col-12 col-lg"><ul class="list-unstyled mb-0"><li><a class=link-secondary href=https://staging.dentrassi.de/legal/disclaimer/>Disclaimer</a><li><a class=link-secondary href=https://staging.dentrassi.de/legal/impress/>Impressum / Impress</a><li><a class=link-secondary href=https://staging.dentrassi.de/legal/privacy/>Datenschutzerklärung / Privacy Policy</a></ul></div><div class="col-12 col-lg"><a class=link-secondary href=https://staging.dentrassi.de/legal/contact/>Contact</a></div></div></div></footer><script src=https://staging.dentrassi.de/js/bootstrap.bundle.min.js></script><script defer src=https://staging.dentrassi.de/elasticlunr.min.js></script><script defer src=https://staging.dentrassi.de/search_index.en.js></script><script defer src=https://staging.dentrassi.de/js/search.js></script>