<!doctype html><html lang=en-US><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link as=font crossorigin href=https://staging.dentrassi.de/files/jost-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/jost-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/jost-latin-700-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/noto-sans-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/noto-sans-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/noto-sans-latin-700-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/source-code-pro-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/source-code-pro-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/source-code-pro-latin-700-normal.woff2 rel=preload type=font/woff2><link href="https://staging.dentrassi.de/main.css?h=16569724627adcf4147e" rel=stylesheet><script>var _paq=window._paq=window._paq||[];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function(){var a="https://logs.dentrassi.de/";_paq.push(['setTrackerUrl',a+ 'matomo.php']);_paq.push(['setSiteId','1']);var b=document,c=b.createElement('script'),d=b.getElementsByTagName('script')[0];c.async=true;c.src=a+ 'matomo.js';d.parentNode.insertBefore(c,d)})()</script><link href=https://staging.dentrassi.de/2018/09/19/apache-camel-java-dsl-eclipse-kura-wires/ rel=canonical><meta content="In part #1 and part #2, we saw how easy it is to interface Apache Camel with Kura Wires. Simply by re-using some existing functionality. A few lines of XML, Groovy and you can already build an IoT solution based on the Camel ecosystem and the Eclipse Kura runtime. This part will focus on the Java DSL of Apache Camel.
" name=description><meta content=article property=og:type><meta content="ctron's blog" property=og:site_name><meta content="Apache Camel Java DSL in combination Eclipse Kura Wires" property=og:title><meta content=https://staging.dentrassi.de/2018/09/19/apache-camel-java-dsl-eclipse-kura-wires property=og:url><meta content="In part #1 and part #2, we saw how easy it is to interface Apache Camel with Kura Wires. Simply by re-using some existing functionality. A few lines of XML, Groovy and you can already build an IoT solution based on the Camel ecosystem and the Eclipse Kura runtime. This part will focus on the Java DSL of Apache Camel.
" property=og:description><meta content="Jens Reimann" property=og:author_name><meta content=https://dentrassi.de property=og:author_url><meta content=summary name=twitter:card><meta content=@ctron name=twitter:site><meta content="Apache Camel Java DSL in combination Eclipse Kura Wires" name=twitter:title><meta content="In part #1 and part #2, we saw how easy it is to interface Apache Camel with Kura Wires. Simply by re-using some existing functionality. A few lines of XML, Groovy and you can already build an IoT solution based on the Camel ecosystem and the Eclipse Kura runtime. This part will focus on the Java DSL of Apache Camel.
" name=twitter:description><meta content=Apache property=article:tag><meta content=Camel property=article:tag><meta content=Eclipse property=article:tag><meta content=IoT property=article:tag><meta content=Kura property=article:tag><title>Apache Camel Java DSL in combination Eclipse Kura Wires – ctron's blog</title><link href=https://staging.dentrassi.de/rss.xml rel=alternate title=RSS type=application/rss+xml><body data-bs-spy=scroll data-bs-target=#toc tabindex=0><nav class="navbar fixed-top navbar-expand-lg bg-body-tertiary"><div class=container><a class=navbar-brand href=https://staging.dentrassi.de>ctron's blog</a><form class="de-c-search-form d-none d-lg-flex ms-auto me-3"><input placeholder="Search docs" aria-label=Search autocomplete=off class=form-control id=searchInput type=search><div class="shadow bg-white rounded" id=suggestions></div></form><div class="d-none d-md-flex ms-auto ms-lg-0 me-4 me-lg-0"><div class=row><div class=col><a title="Link to my GitHub profile" class=link-secondary href=https://github.com/ctron target=_blank> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> </a></div><div class=col><a title="Link to my Mastodon profile" class=link-secondary href=https://mastodon.dentrassi.de/@ctron rel=me target=_blank> <svg viewbox="0 0 24 24" fill=currentColor height=24 stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z"/></svg> </a></div><div class=col><a title="Link to my matrix address" class=link-secondary href=https://matrix.to/#%2F%40ctron%3Adentrassi.de target=_blank> <svg class="feather feather-message-square" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </a></div></div></div><button aria-label="Toggle navigation" aria-controls=rightSidebox aria-expanded=false class=navbar-toggler data-bs-target=#rightSidebox data-bs-toggle=collapse type=button><span class=navbar-toggler-icon></span></button></div></nav><div class="de-layout container"><div class="row d-flex align-items-start"><aside class="col-lg-2 order-last order-lg-0 sticky-lg-top mt-4 mt-lg-5"><div class="de-sidebox de-m-left"><div class=mb-4><h2>More</h2><ul class=list-unstyled><li><a class=link-body-emphasis href=/pages/about/>About</a><li><a class=link-body-emphasis href=/pages/pgp-key/>PGP Key</a><li><a class=link-body-emphasis href=/pages/attic/>Attic</a></ul></div><div class=mb-4><h2>Projects</h2><ul class=list-unstyled><li><a class=link-body-emphasis href=/projects/patternfly-yew/>PatternFly Yew</a><li><a class=link-body-emphasis href=/projects/yew-oauth2/>Yew OAuth2</a><li><a class=link-body-emphasis href=/projects/rpm-builder/>Maven RPM Builder</a><li><a class=link-body-emphasis href=/projects/drogue-iot/>Drogue IoT</a><li><a class=link-body-emphasis href=/projects/openshift-update-graph/>OpenShift Update Graph</a><li><a class=link-body-emphasis href=/projects/ecliipse-iot-packages/>Eclipse IoT Packages</a></ul></div></div></aside><main class="col-12 col-lg-7 px-lg-5 mt-3 mt-lg-4"><article class=de-article itemscope itemtype=http://schema.org/BlogPosting><div><section class=de-article__header><h1 itemprop=headline>Apache Camel Java DSL in combination Eclipse Kura Wires</h1><div><div class="de-c-post-meta text-muted"><ul class=list-inline><li class=list-inline-item><span>9 minute read</span> <meta content=1627 itemprop=wordCount> <span class=d-none itemprop=author itemscope itemtype=https://schema.org/Person> <a href=https://dentrassi.de itemprop=url> <span itemprop=name>Jens Reimann</span> </a> </span><li class=list-inline-item><span content=2018-09-19T10:30:33+02:00 itemprop=datePublished>19 September 2018</span><li class=list-inline-item><span><a class=link-secondary href=/categories/development>Development</a></span></ul><ul class=list-inline><li class=list-inline-item><a class=link-secondary href=https://staging.dentrassi.de/tags/apache/>#apache</a> <a class=link-secondary href=https://staging.dentrassi.de/tags/camel/>#camel</a> <a class=link-secondary href=https://staging.dentrassi.de/tags/eclipse/>#eclipse</a> <a class=link-secondary href=https://staging.dentrassi.de/tags/iot/>#iot</a> <a class=link-secondary href=https://staging.dentrassi.de/tags/kura/>#kura</a></ul></div></div></section><hr><section class=de-article__body itemprop=articleBody><p>In <a rel="noopener nofollow noreferrer" href=https://dentrassi.de/2018/09/14/the-power-of-apache-camel-in-eclipse-kura/ target=_blank>part #1</a> and <a rel="noopener nofollow noreferrer" href=https://dentrassi.de/2018/09/17/sunny-weather-apache-camel-kura-wires/ target=_blank>part #2</a>, we saw how easy it is to interface <a rel="noopener nofollow noreferrer" href=https://camel.apache.org target=_blank>Apache Camel</a> with <a rel="noopener nofollow noreferrer" href=https://eclipse.org/kura target=_blank>Kura</a> Wires. Simply by re-using some existing functionality. A few lines of XML, Groovy and you can already build an IoT solution based on the Camel ecosystem and the Eclipse Kura runtime. This part will focus on the Java DSL of Apache Camel.</p><span id=continue-reading></span><p>It will also take into account, that when you develop and deploy an application, you need some kind of development, test and integration environment. When you build something, no matter how big, based on Camel or Kura Wires, you do want to test it. You want to have unit tests, and the capability to automatically test if your solution works, or still works after you made changes.<p>Using Kura Wires alone, this can be a problem. But Camel offers you a way to easily run your solution in a local IDE, debugging the whole process. You can have extra support for debugging Camel specific constructs like routes and endpoints. Camel has support for JUnit and e.g. using the “seda” endpoints, you can in create an abstraction layer between Camel and Wires.<h2 id=the-goal>The goal</h2><p>I’ll make this one up (and yes, let’s try to keep it realistic). We have a device, and his device allows to set two parameters for its operation (P1 and P2, both floating points). Now we already have the device connection set up in Kura. Maybe using Modbus, or something else. Kura can talk to it using Kura Wires and that is all that counts.<p>Now we do get two additional requirements. There is some kind of operating panel next to the device, which should allow viewing and setting those parameters locally. Also, those parameters should be accessible, using IEC 60870-5-104, for an additional device, right next to the Kura gateway.<p>All of those operations have to be local only, and still work when no connection to the cloud is possible. But of course, we don’t want to lose the ability to monitor the parameters from our cloud system.<p><img alt src=https://dentrassi.de/wp-content/uploads/drawing_5.png><p>The operator panel will, of course, be programmed in the newest and hippest Web UI technology possible. It is super easy to fire a few HTTP API calls and encode everything in JSON. While, at the same time, the IEC 60870 layer has no idea about complex data structures. The panel application will send a full update of both parameters, while the 60870 client, due to the nature of this protocol, will only send one parameter at a time.<p>Doesn’t sound too unrealistic, does it?<h2 id=the-project-structure>The project structure</h2><p>The full project source code is available at <a rel="noopener nofollow noreferrer" href=https://github.com/ctron/kura-examples/tree/master/camel/camel-example4 target=_blank>ctron/kura-examples</a>, on GitHub. So this blog post will only focus on some important spots of the whole project.<p>The project is a standard Maven project, and thus has the typical project structure:<p><img alt="Maven Camel project structure" src=https://dentrassi.de/wp-content/uploads/Selection_529.png><p>There are only three important differences to a standard Java Maven project:<p>The packaging type is <code>bundle</code>, which requires the <code>maven-bundle-plugin</code>. It will create an OSGi bundle JAR, instead of a plain JAR file. This is required as the Kura IoT gateway is based on OSGi.<p>We will create a “DP” package at the end of the build, using the <a rel="noopener nofollow noreferrer" href=https://ctron.github.io/osgi-dp/ target=_blank>OSGi DP Maven Plugin</a>. This package can directly be uploaded to the Kura instance. As this plugin does include direct dependencies, but doesn’t include transient dependencies (on purpose), the project declares a few dependencies as “provided” to prevent them from being re-packaged in the final DP package.<p>The project uses the <code>maven-antrun-plugin</code> to download and unpack the static Swagger UI resources. Swagger UI is just a convenience for playing around with the REST API later on. Camel will take care of creating the OpenAPI (Swagger) JSON description, even if the SwaggerUI part is removed. So in a production setup, you most likely would not add Swagger UI to the deployment.<h2 id=starting-it-up>Starting it up</h2><p>The project has three entry points:<ul><li><code>CamelApplicationComponent</code> is the OSGi service, which will be managed by the OSGi service component runtime (SCR) when the component is uploaded to Kura.<li><code>TestApplication</code> is a local test application, which is intended to be started from the local IDE for manual testing.<li><code>CamelApplicationComponentTest</code> is the JUnit 4 based test for testing the Camel routes.</ul><p>All three entry points will have a slightly different creation process for the Camel Context. This is simply due to the fact that different environments (like plain Java, OSGI and JUnit) have different requirements.<p>The routes configuration, which is the same for all entry points, is located in <code>Routes</code>.<p>Let’s have a quick look at the OSGi startup:<pre class=language-java data-lang=java style=background:#fafafa;color:#383a42><code class=language-java data-lang=java><span>@</span><span style=color:#e45649>Activate
</span><span style=color:#a626a4>public</span><span> void </span><span style=color:#e45649>start</span><span>(final </span><span style=color:#c18401>BundleContext</span><span> context) throws </span><span style=color:#c18401>Exception </span><span>{
</span><span>  </span><span style=color:#e45649>this</span><span>.context </span><span style=color:#a626a4>= new </span><span style=color:#c18401>OsgiDefaultCamelContext</span><span>(context, </span><span style=color:#c18401>SwaggerUi</span><span>.</span><span style=color:#e45649>createRegistry</span><span>());
</span><span>  </span><span style=color:#e45649>this</span><span>.context.</span><span style=color:#e45649>addRoutes</span><span>(</span><span style=color:#a626a4>new </span><span style=color:#c18401>Routes</span><span>(</span><span style=color:#e45649>this</span><span>.state));
</span><span>  </span><span style=color:#e45649>this</span><span>.context.</span><span style=color:#e45649>start</span><span>();
</span><span>
</span><span>  </span><span style=color:#a626a4>final </span><span style=color:#c18401>Dictionary</span><span><</span><span style=color:#c18401>String</span><span>, </span><span style=color:#c18401>Object</span><span>> properties </span><span style=color:#a626a4>= new </span><span style=color:#c18401>Hashtable</span><span><>();
</span><span>  properties.</span><span style=color:#e45649>put</span><span>(</span><span style=color:#50a14f>"camel.context.id"</span><span>, </span><span style=color:#50a14f>"camel.example.4"</span><span>);
</span><span>  </span><span style=color:#e45649>this</span><span>.registration </span><span style=color:#a626a4>=</span><span> context.</span><span style=color:#e45649>registerService</span><span>(</span><span style=color:#c18401>CamelContext</span><span>.</span><span style=color:#e45649>class</span><span>, </span><span style=color:#e45649>this</span><span>.context, properties);
</span><span>}
</span></code></pre><p>Once the component is placed inside an OSGi container, the start method will be called and set up the Camel context. This is all pretty straightforward Camel code. As the last step, the Camel context will be registered with the OSGi service layer. Setting the service property <code>camel.context.id</code> in the process. This property is important, as we will, later on, use it to locate the Camel context from the Kura Wires graph by it.<h2 id=the-java-dsl-routes>The Java DSL routes</h2><p>The routes configuration is pretty simple Camel stuff. First, the REST DSL will be used to configure the REST API. For example, the “GET” operation to receive the currently active parameters:<pre class=language-java data-lang=java style=background:#fafafa;color:#383a42><code class=language-java data-lang=java><span>…
</span><span>  .</span><span style=color:#e45649>get</span><span>()
</span><span>  .</span><span style=color:#e45649>description</span><span>(</span><span style=color:#50a14f>"Get the current parameters"</span><span>)
</span><span>  .</span><span style=color:#e45649>outType</span><span>(</span><span style=color:#c18401>Parameters</span><span>.</span><span style=color:#e45649>class</span><span>)
</span><span>  .</span><span style=color:#e45649>to</span><span>(</span><span style=color:#50a14f>"direct:getParameters"</span><span>)
</span><span>…
</span></code></pre><p>This creates a get operation, which is being redirected to the internal “direct:getParameters” endpoint. Which is a way of forwarding that call to another Camel Route. This way Camel routes can be re-used from different callers.<p>Like for example the <code>direct:updateParameters</code> route, which will be called by all routes which want to update the parameters, no matter if that call originated in the IEC 60870, the REST or the Kura Wires component:<pre class=language-java data-lang=java style=background:#fafafa;color:#383a42><code class=language-java data-lang=java><span style=color:#e45649>from</span><span>(</span><span style=color:#50a14f>"direct:updateParameters"</span><span>)
</span><span>  .</span><span style=color:#e45649>routeId</span><span>(</span><span style=color:#50a14f>"updateParameters"</span><span>)
</span><span>  .</span><span style=color:#e45649>bean</span><span>(</span><span style=color:#e45649>this</span><span>.state, </span><span style=color:#50a14f>"updateCurrentParameters"</span><span>)
</span><span>  .</span><span style=color:#e45649>multicast</span><span>()
</span><span>  .</span><span style=color:#e45649>to</span><span>(</span><span style=color:#50a14f>"direct:update.wires"</span><span>, </span><span style=color:#50a14f>"direct:update.iec.p1"</span><span>, </span><span style=color:#50a14f>"direct:update.iec.p2"</span><span>).</span><span style=color:#e45649>end</span><span>();
</span></code></pre><p>The route will forward the new parameters to the method <code>updateCurrentParameters</code> of the <code>State</code> class. This class is a plain Java class, holding the state and filling in <code>null</code> parameters with the current state. The result of this method will be forwarded to the other routes, for updating Kura Wires and the two parameters in the IEC 60870 data layer.<h2 id=trying-it-out>Trying it out</h2><p>If you have Java and Maven installed, then you can simply compile the package by running:<pre class=language-bash data-lang=bash style=background:#fafafa;color:#383a42><code class=language-bash data-lang=bash><span style=color:#0184bc>cd</span><span> camel/camel-example4
</span><span style=color:#e45649>mvn</span><span> clean package
</span></code></pre><p>This will compile, run the unit tests and create the <code>.dp</code> package in the folder <code>target</code>.<p>You can upload the package directly to your Kura instance. Please note that you do need the dependencies installed in <a rel="noopener nofollow noreferrer" href=https://dentrassi.de/2018/09/14/the-power-of-apache-camel-in-eclipse-kura/ target=_blank>part #1</a> of the tutorial. In additional you will need to install the following dependencies:<ul><li><code>https://repo1.maven.org/maven2/de/dentrassi/kura/addons/de.dentrassi.kura.addons.camel.iec60870/0.6.1/de.dentrassi.kura.addons.camel.iec60870-0.6.1.dp</code><li><code>https://repo1.maven.org/maven2/de/dentrassi/kura/addons/de.dentrassi.kura.addons.camel.jetty/0.6.1/de.dentrassi.kura.addons.camel.jetty-0.6.1.dp</code><li><code>https://repo1.maven.org/maven2/de/dentrassi/kura/addons/de.dentrassi.kura.addons.camel.swagger/0.6.1/de.dentrassi.kura.addons.camel.swagger-0.6.1.dp</code><li><code>https://repo1.maven.org/maven2/de/dentrassi/kura/addons/de.dentrassi.kura.addons.camel.http/0.6.1/de.dentrassi.kura.addons.camel.http-0.6.1.dp</code></ul><p>This will install the support for REST APIs, backed by Jetty. As Kura already contains Jetty, it only makes sense to re-use those existing components.<p>Once the component is deployed and started, you can navigate your web browser to <code>http://:8090/api</code>. This should bring up the Swagger UI, showing the API of the routes:<p><img alt="SwaggerUI of Camel example for Kura" src=https://dentrassi.de/wp-content/uploads/Selection_530.png><p>Next, you can create the following components in the Kura wires graph:<ul><li>Create a new “Camel consumer”, named <code>consumer2</code> <ul><li>Set the ID to <code>camel.example.4</code><li>Set the endpoint URI to <code>seda:wiresOutput1</code></ul><li>Create a new “Logger”, named <code>logger2</code> <ul><li>Set it to “verbose”</ul><li>Connect <code>consumer2</code> with <code>logger2</code><li>Click on “Apply” to activate the changes</ul><p>Open the console of Kura and then open the Swagger UI page with the Web browser. Click on ““Try Out” of the “PUT” operation, enter some new values for <code>setpoint1</code> and/or <code>setpoint2</code> and click on the blue “Execute” button.<p>In the console of Kura you should see the following output:<pre style=background:#fafafa;color:#383a42><code><span>2018-09-17T13:35:49,589 [Camel (camel-10) thread #27 - seda://wiresOutput1] INFO  o.e.k.i.w.l.Logger - Received WireEnvelope from org.eclipse.kura.wire.camel.CamelConsume-1537188764126-1
</span><span>2018-09-17T13:35:49,589 […] INFO  o.e.k.i.w.l.Logger - Record List content:
</span><span>2018-09-17T13:35:49,589 […] INFO  o.e.k.i.w.l.Logger -   Record content:
</span><span>2018-09-17T13:35:49,589 […] INFO  o.e.k.i.w.l.Logger -     P1 : 3.0
</span><span>2018-09-17T13:35:49,589 […] INFO  o.e.k.i.w.l.Logger -     P2 : 2.0
</span><span>2018-09-17T13:35:49,589 […] INFO  o.e.k.i.w.l.Logger -
</span></code></pre><p>This is the result of the “Logger” component from Kura Wires. Which did receive the new parameter updates from the Camel Context, as they got triggered through the Web UI. At the same time, the <a rel="noopener nofollow noreferrer" href=https://dentrassi.de/2017/02/17/iec-60870-5-104-with-apache-camel/ target=_blank>IEC 60870 server</a> would update all clients being subscribed to those data items.<h2 id=wrapping-it-up>Wrapping it up</h2><p>The last part of this tutorial showed that, if the prep-prepared XML router component of Eclipse Kura, is not enough, then you can drop in your own and powerful replacements. Developing with all the bells and whistles of Apache Camel, and still integrate with Kura Wires if necessary.</section></div></article></main><aside class="col-lg-3 order-first order-lg-0 sticky-top mt-lg-5 de-m-collapsible"><div class="de-sidebox de-m-right collapse d-lg-block" id=rightSidebox><div class="d-flex d-md-none pb-3"><div class=row><div class=col><a title="Link to my GitHub profile" class=link-secondary href=https://github.com/ctron target=_blank> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> </a></div><div class=col><a title="Link to my Mastodon profile" class=link-secondary href=https://mastodon.dentrassi.de/@ctron rel=me target=_blank> <svg viewbox="0 0 24 24" fill=currentColor height=24 stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z"/></svg> </a></div><div class=col><a title="Link to my matrix address" class=link-secondary href=https://matrix.to/#%2F%40ctron%3Adentrassi.de target=_blank> <svg class="feather feather-message-square" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </a></div></div></div><div class="de-c-toc mb-4"><h2>Table of Content</h2><ul class="list-unstyled de-c-toc__first" id=toc><li><a class=link-body-emphasis href=#the-goal>The goal</a><li><a class=link-body-emphasis href=#the-project-structure>The project structure</a><li><a class=link-body-emphasis href=#starting-it-up>Starting it up</a><li><a class=link-body-emphasis href=#the-java-dsl-routes>The Java DSL routes</a><li><a class=link-body-emphasis href=#trying-it-out>Trying it out</a><li><a class=link-body-emphasis href=#wrapping-it-up>Wrapping it up</a></ul></div><div class="d-lg-block d-none"><div class="de-c-recent-posts mb-2"><h2 class=d-flex><span>Recent Posts</span> <span class=de-c-title__action> <a href=https://staging.dentrassi.de/archive>Archive</a> </span></h2><ul class=list-unstyled><li><a title="An OpenID Connect command line client" class=link-body-emphasis href=/2024/03/16/oidc-command-line-client/>An OpenID Connect command line client</a><li><a title="Release of Trunk 0.19.0" class=link-body-emphasis href=/2024/03/11/trunk-0-19-0/>Release of Trunk 0.19.0</a><li><a title="Good news everyone: Trunk is back" class=link-body-emphasis href=/2024/01/16/good-news-everyone/>Good news everyone: Trunk is back</a><li><a title="Yew components for OpenID connect and OAuth2" class=link-body-emphasis href=/2023/10/22/yew-oauth2/>Yew components for OpenID connect and OAuth2</a><li><a title="trunk-ng, the fork of trunk" class=link-body-emphasis href=/2023/10/14/trunk-ng-the-fork-of-trunk/>trunk-ng, the fork of trunk</a></ul></div></div><div class="de-c-toc mb-4"><h2 class=d-flex><span>Categories</span> <span class=de-c-title__action> <a href=https://staging.dentrassi.de/categories>All</a> </span></h2><ul class=list-unstyled><li><a class=link-body-emphasis href=https://staging.dentrassi.de/categories/development/>Development</a><li><a class=link-body-emphasis href=https://staging.dentrassi.de/categories/iot/>IoT</a><li><a class=link-body-emphasis href=https://staging.dentrassi.de/categories/technical-stuff/>Technical Stuff</a></ul></div><div class="de-c-toc mb-4"><h2 class=d-flex><span>Tags</span> <span class=de-c-title__action> <a href=https://staging.dentrassi.de/tags>All</a> </span></h2><a class=link-body-emphasis href=https://staging.dentrassi.de/tags/apache/>#apache</a><a class=link-body-emphasis href=https://staging.dentrassi.de/tags/camel/>#camel</a><a class=link-body-emphasis href=https://staging.dentrassi.de/tags/eclipse/>#eclipse</a><a class=link-body-emphasis href=https://staging.dentrassi.de/tags/iot/>#iot</a><a class=link-body-emphasis href=https://staging.dentrassi.de/tags/kura/>#kura</a></div></div></aside></div></div><footer class="bg-body-tertiary py-5 mt-lg-5"><div class="container text-body-secondary"><div class=row><div class="col-12 col-lg mb-2">© ctron's blog – All rights reserved</div><div class="col-12 col-lg"><ul class="list-unstyled mb-0"><li><a class=link-secondary href=https://staging.dentrassi.de/legal/disclaimer/>Disclaimer</a><li><a class=link-secondary href=https://staging.dentrassi.de/legal/impress/>Impressum / Impress</a><li><a class=link-secondary href=https://staging.dentrassi.de/legal/privacy/>Datenschutzerklärung / Privacy Policy</a></ul></div><div class="col-12 col-lg"><a class=link-secondary href=https://staging.dentrassi.de/legal/contact/>Contact</a></div></div></div></footer><script src="https://staging.dentrassi.de/js/bootstrap.bundle.min.js?h=0833b2e9c3a26c258476"></script><script src="https://staging.dentrassi.de/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer></script><script src="https://staging.dentrassi.de/js/search.js?h=ed51a29cb343a0c8a535" defer></script><script>window.searchIndexLocation="https://staging.dentrassi.de/search_index.en.json?h=19d4ff246655ef412d02"</script>