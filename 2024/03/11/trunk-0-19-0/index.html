<!doctype html><html lang=en-US><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link as=font crossorigin href=https://staging.dentrassi.de/files/jost-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/jost-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/jost-latin-700-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/noto-sans-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/noto-sans-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/noto-sans-latin-700-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/source-code-pro-latin-400-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/source-code-pro-latin-500-normal.woff2 rel=preload type=font/woff2><link as=font crossorigin href=https://staging.dentrassi.de/files/source-code-pro-latin-700-normal.woff2 rel=preload type=font/woff2><link href="https://staging.dentrassi.de/main.css?h=0af1acb576d4063d05c1" rel=stylesheet><meta content="Release summary of Trunk 0.19.0
" name=description><meta content="Jens Reimann" name=author><meta content=article property=og:type><meta content="ctron's blog" property=og:site_name><meta content="Release of Trunk 0.19.0" property=og:title><meta content=https://staging.dentrassi.de/2024/03/11/trunk-0-19-0 property=og:url><meta content="Release summary of Trunk 0.19.0
" property=og:description><meta content="Jens Reimann" property=og:author_name><meta content=https://dentrassi.de property=og:author_url><meta content=2024-03-11T00:00:00+00:00 name=publish_date property=og:publish_date><meta content=summary name=twitter:card><meta content=@ctron name=twitter:site><meta content="Release of Trunk 0.19.0" name=twitter:title><meta content="Release summary of Trunk 0.19.0
" name=twitter:description><meta content=Rust property=article:tag><meta content=WebAssembly property=article:tag><meta content=Frontend property=article:tag><title>Release of Trunk 0.19.0 â€“ ctron's blog</title><link href=https://staging.dentrassi.de/2024/03/11/trunk-0-19-0/ rel=canonical><link href=https://staging.dentrassi.de/rss.xml rel=alternate title=RSS type=application/rss+xml><script>var _paq=window._paq=window._paq||[];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function(){var a="https://logs.dentrassi.de/";_paq.push(['setTrackerUrl',a+ 'matomo.php']);_paq.push(['setSiteId','1']);var b=document,c=b.createElement('script'),d=b.getElementsByTagName('script')[0];c.async=true;c.src=a+ 'matomo.js';d.parentNode.insertBefore(c,d)})()</script><body data-bs-spy=scroll data-bs-target=#toc tabindex=0><nav class="navbar fixed-top navbar-expand-lg bg-body-tertiary"><div class=container><a class=navbar-brand href=https://staging.dentrassi.de>ctron's blog</a><form class="de-c-search-form d-none d-lg-flex ms-auto me-3"><input aria-label=Search autocomplete=off class=form-control id=searchInput placeholder=Search type=search><div class="shadow bg-white rounded" id=suggestions></div></form><div class="d-none d-md-flex ms-auto ms-lg-0 me-4 me-lg-0"><div class=row><div class=col><a title="Link to my GitHub profile" class=link-secondary href=https://github.com/ctron target=_blank> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> </a></div><div class=col><a title="Link to my Mastodon profile" class=link-secondary href=https://mastodon.dentrassi.de/@ctron rel=me target=_blank> <svg viewbox="0 0 24 24" fill=currentColor height=24 stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z"/></svg> </a></div><div class=col><a title="Link to my matrix address" class=link-secondary href=https://matrix.to/#%2F%40ctron%3Adentrassi.de target=_blank> <svg class="feather feather-message-square" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </a></div></div></div><button aria-label="Toggle navigation" aria-controls=rightSidebox aria-expanded=false class=navbar-toggler data-bs-target=#rightSidebox data-bs-toggle=collapse type=button><span class=navbar-toggler-icon></span></button></div></nav><div class="de-layout container"><div class="row d-flex align-items-start"><aside class="col-lg-2 order-last order-lg-0 sticky-lg-top mt-4 mt-lg-5"><div class="de-sidebox de-m-left"><div class=mb-4><h2>Projects</h2><ul class=list-unstyled><li><a class=link-body-emphasis href=/projects/patternfly-yew/>PatternFly Yew</a><li><a class=link-body-emphasis href=/projects/yew-oauth2/>Yew OAuth2</a><li><a class=link-body-emphasis href=/projects/trunk/>Trunk</a><li><a class=link-body-emphasis href=/projects/openshift-update-graph/>OpenShift Update Graph</a><li><a class=link-body-emphasis href=/projects/oidc-cli/>OIDC CLI</a><li><a class=link-body-emphasis href=/projects/csaf-walker/>CSAF Walker</a><li><a class=link-body-emphasis href=/projects/rpm-builder/>Maven RPM Builder</a></ul></div><div class=mb-4><h2>More</h2><ul class=list-unstyled><li><a class=link-body-emphasis href=/pages/about/>About</a><li><a class=link-body-emphasis href=/pages/pgp-key/>PGP Key</a><li><a class=link-body-emphasis href=/pages/attic/>Attic</a></ul></div></div></aside><main class="col-12 col-lg-7 px-lg-5 mt-3 mt-lg-4"><article class=de-article itemscope itemtype=http://schema.org/BlogPosting><div><section class=de-article__header><h1 itemprop=headline>Release of Trunk 0.19.0</h1><div><div class="de-c-post-meta text-muted"><ul class=list-inline><li class=list-inline-item><span>5 minute read</span> <meta content=958 itemprop=wordCount> <span class=d-none itemprop=author itemscope itemtype=https://schema.org/Person> <a href=https://dentrassi.de itemprop=url> <span itemprop=name>Jens Reimann</span> </a> </span><li class=list-inline-item><span content=2024-03-11T00:00:00+00:00 itemprop=datePublished>11 March 2024</span><li class=list-inline-item><span><a class=link-secondary href=/categories/technical-stuff>Technical Stuff</a></span></ul><ul class=list-inline><li class=list-inline-item><a class=link-secondary href=https://staging.dentrassi.de/tags/rust/>#rust</a> <span> </span> <a class=link-secondary href=https://staging.dentrassi.de/tags/webassembly/>#webassembly</a> <span> </span> <a class=link-secondary href=https://staging.dentrassi.de/tags/frontend/>#frontend</a> <span> </span></ul></div></div></section><hr><section class=de-article__body itemprop=articleBody><p>The release of Trunk 0.19.0 has a focus on making life easier when creating Rust-based web applications. Find out whatâ€™s new in this blog post.</p><span id=continue-reading></span><p>The general theme of this release was to improve the flexibility of Trunk, enabling more control over the build process and making it available for more environments.<h2 id=paths-prefixes>Paths & prefixes</h2><p>A repeated pattern of requests for Trunk was around public URL base, and how it can be controlled. There had been two constructs, one being the base URL at which the application was expected to be hosted later on. While the other was the base URL Trunk would serve the application from when using <code>trunk serve</code>. The latter one could only use a non-relative path, but also could not use a full URL. While the base URL (public URL) could basically be anything, including a relative path prefix.<p>Due to those conflicting requirements, there had been a few special treatments of the <code>--public-url</code> parameter, with some assumptions that worked for many, but not everyone.<p>While keeping the current default, Trunk 0.19.0 adds some more knobs that can be used to control both values individually. Read more about those here: <a rel="noopener nofollow noreferrer" href=https://trunkrs.dev/advanced/#base-urls-public-urls-paths-reverse-proxies target=_blank>Base URLs, public URLs, paths & reverse proxies</a>.<p>Another use case was the requirement to be able to control the output path of assets inside the distribution folder. So far, all assets (generated or copied) went into the root of the distribution folder. Again, something that works for most, but not everyone.<p>In Trunk 0.19.0 it now is possible to use the <code>data-target-path</code> attribute on all asset elements. Allowing for a finer grained control of where resourced end up.<p>All those features can be used, for example, to move static resources into a sub-folder, and have them cased by a CDN, keeping the same base. Or it is possible to put a reverse proxy in front of <code>trunk serve</code>, allowing for more complex development setups.<h2 id=application-initialization-hooks>Application initialization hooks</h2><p>When a web application gets loaded, a JavaScript snippet in the HTML file will fetch the WebAssembly BLOB and then instantiate it. That works well, but has some downsides: for one, you donâ€™t see any progress loading that initial BLOB. Second, when something fails, you only see that on the browser console. And last, once itâ€™s loaded, donâ€™t have access to the WebAssembly instance.<p><code>wasm_bindgen</code> has most of the glue code to load the WebAssembly application. Trunk only adds a snippet inline, to load that snippet generated by <code>wasm_bindgen</code>. Itâ€™s now possible to add an initializer to this process, which gets called during the initialization process, allowing to get the current progress, the status, and the final WebAssembly module instance.<p>For a complete example, check out: https://github.com/trunk-rs/trunk/tree/main/examples/initializer<h2 id=environments>Environments</h2><p>When making requests for downloading tools or towards configured reverse proxy targets, it is not possible to control the use of a proxy for such connections. This may be useful when you can to proxy towards internal systems, or need to deal with corporate network setups.<p>Part of the released binaries are also versions for Linux/MUSL now. Again, glibc works fine for most, but sometimes the glibc versions donâ€™t align one you get linker errors. Requiring you to self-compile trunk. Especially in CIs this can be a time-consuming job. Using MUSL might just make your life easier.<p>By default, trunk will still use <code>rustls</code> for both client and server side TLS functionality. However, sometimes people prefer to use the system native TLS implementation. Thatâ€™s now an option, by using an additional feature during build time.<p>Also, IPv6 is here, and trunk can now deal with it. Itâ€™s as simple as that. Can it be disabled? Sure!<h2 id=trunk-version>Trunk version</h2><p>Trunk is now aware of its own version. And it brings two features with that. One is an update check, which will check once a day on startup if thereâ€™s a new version. So youâ€™ll never miss an update ðŸ˜‰<p>The second feature allows you to put a minimum required Trunk version into the <code>Trunk.toml</code> file. This can come in handy when youâ€™re using some features that only exist with a certain trunk version. The version is a Rust SemVer range and can also include pre-release versions.<p>Thereâ€™s only one caveat: This feature is only present starting with Trunk <code>0.19.0</code>. So while you can set the minimum required trunk version to <code>0.19.0</code> when using new features, Trunk <code>0.18.x</code> or before will not honor that setting and not raise an error. But it will be there for the next version.<h2 id=bug-fixes-performance-improvements>Bug fixes & performance improvements</h2><p>Of course, this feature also contains some bug fixes. Most notably, there had been some startup issues when the startup partially failed. The trunk process could just hang. There was a race condition in the build pipeline leading to numerous parallel builds. Intermediate files used a hashed name, which lead to a growing <code>target</code> directory. And a bunch more issues.<h2 id=what-s-next>Whatâ€™s next?</h2><p>For you? Well, I would hope that youâ€™ll give it a try and report any issues that might come up. Check out <a href="https://github.com/trunk-rs/trunk?tab=readme-ov-file#getting-started" rel="noopener nofollow noreferrer" target=_blank>the easiest ways to get started</a>.<p>For Trunk? That depends. There are a lot of ideas and things that can be improved. PRs welcome ðŸ˜‰.<p>If youâ€™re interested, maybe join the <a rel="noopener nofollow noreferrer" href=https://discord.gg/JEPdBujTDr target=_blank>Trunk Discord channel</a> or create an issue/discussion on GitHub.<ul><li>Paths & prefixes (see: https://trunkrs.dev/advanced/#base-urls-public-urls-paths-reverse-proxies)<li>Application initializer hooks (see: https://trunkrs.dev/advanced/#initializer)<li>Trunk versions (see: https://trunkrs.dev/advanced/#update-check and https://trunkrs.dev/configuration/#required-version)<li>Broader environment support (musl target, IPv6, proxies, â€¦)</ul></section></div></article></main><aside class="col-lg-3 order-first order-lg-0 sticky-top mt-lg-5 de-m-collapsible"><div class="de-sidebox de-m-right collapse d-lg-block" id=rightSidebox><div class="d-flex d-md-none pb-3"><div class=row><div class=col><a title="Link to my GitHub profile" class=link-secondary href=https://github.com/ctron target=_blank> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> </a></div><div class=col><a title="Link to my Mastodon profile" class=link-secondary href=https://mastodon.dentrassi.de/@ctron rel=me target=_blank> <svg viewbox="0 0 24 24" fill=currentColor height=24 stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z"/></svg> </a></div><div class=col><a title="Link to my matrix address" class=link-secondary href=https://matrix.to/#%2F%40ctron%3Adentrassi.de target=_blank> <svg class="feather feather-message-square" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </a></div></div></div><div class="de-c-toc mb-4"><h2>Table of Content</h2><ul class="list-unstyled de-c-toc__first" id=toc><li><a class=link-body-emphasis href=#paths-prefixes>Paths & prefixes</a><li><a class=link-body-emphasis href=#application-initialization-hooks>Application initialization hooks</a><li><a class=link-body-emphasis href=#environments>Environments</a><li><a class=link-body-emphasis href=#trunk-version>Trunk version</a><li><a class=link-body-emphasis href=#bug-fixes-performance-improvements>Bug fixes & performance improvements</a><li><a class=link-body-emphasis href=#what-s-next>Whatâ€™s next?</a></ul></div><div class="d-lg-block d-none"><div class="de-c-recent-posts mb-2"><h2 class=d-flex><span>Recent Posts</span> <span class=de-c-title__action> <a href=https://staging.dentrassi.de/archive>Archive</a> </span></h2><ul class=list-unstyled><li><a title="CSAF Walker: Working with CSAF providers in Rust" class=link-body-emphasis href=/2024/05/19/csaf-walker/>CSAF Walker: Working with CSAF providers in Rust</a><li><a title="WebAssembly loading progress visualization with Trunk" class=link-body-emphasis href=/2024/05/05/webassembly-loading-process-visualization-trunk/>WebAssembly loading progress visualization with Trunk</a><li><a title="ReSyMo: Remote System Monitoring" class=link-body-emphasis href=/2024/04/07/remote-system-monitoring/>ReSyMo: Remote System Monitoring</a><li><a title="An OpenID Connect command line client" class=link-body-emphasis href=/2024/03/16/oidc-command-line-client/>An OpenID Connect command line client</a><li><a title="Release of Trunk 0.19.0" class=link-body-emphasis href=/2024/03/11/trunk-0-19-0/>Release of Trunk 0.19.0</a></ul></div></div><div class="de-c-toc mb-4"><h2 class=d-flex><span>Categories</span> <span class=de-c-title__action> <a href=https://staging.dentrassi.de/categories>All</a> </span></h2><ul class=list-unstyled><li><a class=link-body-emphasis href=https://staging.dentrassi.de/categories/technical-stuff/>Technical Stuff</a><li><a class=link-body-emphasis href=https://staging.dentrassi.de/categories/open-source/>Open Source</a></ul></div><div class="de-c-toc mb-4"><h2 class=d-flex><span>Tags</span> <span class=de-c-title__action> <a href=https://staging.dentrassi.de/tags>All</a> </span></h2><a class=link-body-emphasis href=https://staging.dentrassi.de/tags/rust/>#rust</a><span> </span><a class=link-body-emphasis href=https://staging.dentrassi.de/tags/webassembly/>#webassembly</a><span> </span><a class=link-body-emphasis href=https://staging.dentrassi.de/tags/frontend/>#frontend</a><span> </span></div></div></aside></div></div><footer class="bg-body-tertiary py-5 mt-lg-5"><div class="container text-body-secondary"><div class=row><div class="col-12 col-lg mb-2">Â© ctron's blog â€“ All rights reserved</div><div class="col-12 col-lg"><ul class="list-unstyled mb-0"><li><a class=link-secondary href=https://staging.dentrassi.de/legal/disclaimer/>Disclaimer</a><li><a class=link-secondary href=https://staging.dentrassi.de/legal/impress/>Impressum / Impress</a><li><a class=link-secondary href=https://staging.dentrassi.de/legal/privacy/>DatenschutzerklÃ¤rung / Privacy Policy</a></ul></div><div class="col-12 col-lg"><a class=link-secondary href=https://staging.dentrassi.de/legal/contact/>Contact</a></div></div></div></footer><script src="https://staging.dentrassi.de/js/bootstrap.bundle.min.js?h=0833b2e9c3a26c258476"></script><script src="https://staging.dentrassi.de/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer></script><script src="https://staging.dentrassi.de/js/search.js?h=ed51a29cb343a0c8a535" defer></script><script>window.searchIndexLocation="https://staging.dentrassi.de/search_index.en.json?h=a10d1d3d5bf8f65ccd05"</script>